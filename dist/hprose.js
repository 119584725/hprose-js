// Hprose for JavaScript v1.0.0
// Copyright (c) 2008-2016 http://hprose.com
// Hprose is freely distributable under the MIT license.
// For all details and documentation:
// https://github.com/hprose/hprose-js

function HproseStringInputStream(e){"use strict";var t=0,r=e.length;this.getc=function(){return e.charAt(t++)},this.read=function(r){var n=e.substr(t,r);return this.skip(r),n},this.skip=function(e){t+=e},this.readuntil=function(n){var a,i=e.indexOf(n,t);return i>=0?(a=e.substr(t,i-t),t=i+n.length):(a=e.substr(t),t=r),a}}function HproseStringOutputStream(e){"use strict";void 0===e&&(e="");var t=[e];this.write=function(e){t.push(e)},this.mark=function(){e=this.toString()},this.reset=function(){t=[e]},this.clear=function(){t=[]},this.toString=function(){return t.join("")}}if(function(e){"use strict";e.hprose={}}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){return e.length>2&&"is"===e.substr(0,2)?"set"+e.substr(2):"set"+e.charAt(0).toUpperCase()+e.substr(1)}function n(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return function(t){return e.apply(t,Array.prototype.slice.call(arguments,1))}}var a="function"!=typeof Object.defineProperties?function(e,n){for(var a in n){var i=n[a];e[a]=t,"value"in i?e[a]=i.value:("get"in i&&(e[a]=i.get),"set"in i&&(e[r(a)]=i.set))}}:function(e,t){for(var n in t){var a=t[n];"get"in a&&(t[n]={value:a.get}),"set"in a&&(t[r(n)]={value:a.set})}Object.defineProperties(e,t)},i=function(){},o="function"!=typeof Object.create?function(e,t){if("object"!=typeof e&&"function"!=typeof e)throw TypeError("prototype must be an object or function");i.prototype=e;var r=new i;return i.prototype=null,t&&a(r,t),r}:function(e,t){if(t){for(var n in t){var a=t[n];"get"in a&&(t[n]={value:a.get}),"set"in a&&(t[r(n)]={value:a.set})}return Object.create(e,t)}return Object.create(e)};e.hprose.defineProperties=a,e.hprose.createObject=o,e.hprose.generic=n}(function(){return this||(1,eval)("this")}()),function(e,r){"use strict";function n(e,t){for(var r=e.prototype,n=0,a=t.length;a>n;n++){var o=t[n],u=r[o];"function"==typeof u&&"undefined"==typeof e[o]&&(e[o]=i(u))}}if(Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},a=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),a.prototype=new n,a}),"isArray"in Array||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(!this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=+Number(arguments[1])||0;if(Math.abs(n)===1/0&&(n=0),n>=r)return-1;for(var a=Math.max(n>=0?n:r-Math.abs(n),0);r>a;){if(a in t&&t[a]===e)return a;a++}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(!this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return-1;var a=+Number(arguments[1])||0;Math.abs(a)===1/0&&(a=0);for(var i=a>=0?Math.min(a,n-1):n-Math.abs(a);i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=[],a=arguments[1],i=0;r>i;i++)if(i in t){var o=t[i];e.call(a,o,i,t)&&n.push(o)}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=0;r>a;a++)a in t&&e.call(n,t[a],a,t)}),Array.prototype.every||(Array.prototype.every=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=0;r>a;a++)if(a in t&&!e.call(n,t[a],a,t))return!1;return!0}),Array.prototype.map||(Array.prototype.map=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=new Array(r),i=0;r>i;i++)i in t&&(a[i]=e.call(n,t[i],i,t));return a}),Array.prototype.some||(Array.prototype.some=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=0;r>a;a++)if(a in t&&e.call(n,t[a],a,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("First argument is not callable");if(0===n&&1===arguments.length)throw new TypeError("Array length is 0 and no second argument");var a,i=0;for(arguments.length>=2?a=arguments[1]:(a=t[0],i=1);n>i;++i)i in t&&(a=e.call(r,a,t[i],i,t));return a}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("First argument is not callable");if(0===n&&1===arguments.length)throw new TypeError("Array length is 0 and no second argument");var a,i=n-1;if(arguments.length>=2)a=arguments[1];else for(;;){if(i in t){a=t[i--];break}if(--i<0)throw new TypeError("Array contains no values")}for(;i>=0;)i in t&&(a=e.call(r,a,t[i],i,t)),i--;return a}),String.prototype.trim||(String.prototype.trim=function(){return this.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.toString().replace(/^[\s\xa0]+/,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.toString().replace(/[\s\xa0]+$/,"")}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on non-object");var i=[];for(var o in a)e.call(a,o)&&i.push(o);if(t)for(var u=0;n>u;u++)e.call(a,r[u])&&i.push(r[u]);return i}}()),Date.now||(Date.now=function(){return+new Date}),!Date.prototype.toISOString){var a=function(e){return 10>e?"0"+e:e};Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"}}var i=e.hprose.generic;n(Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"]),n(String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","localeCompare","match","quote","replace","search","slice","split","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight","anchor","big","blink","bold","fixed","fontcolor","fontsize","italics","link","small","strike","sub","sup"])}(function(){return this||(1,eval)("this")}()),function(e){"use strict";var t="WeakMap"in e,r="Map"in e,n=!0;if(r&&(n="forEach"in new e.Map),!(t&&r&&n)){var a="create"in Object,i=function(){return a?Object.create(null):{}},o=i(),u=0,s=function(e){var t=i(),r=e.valueOf;a?Object.defineProperty(e,"valueOf",{value:function(n,a){return this===e&&a in o&&o[a]===n?(a in t||(t[a]=i()),t[a]):r.apply(this,arguments)},writable:!0,configurable:!0,enumerable:!1}):e.valueOf=function(n,a){return this===e&&a in o&&o[a]===n?(a in t||(t[a]=i()),t[a]):r.apply(this,arguments)}};if(t||(e.WeakMap=function g(){var e=i(),t=u++;o[t]=e;var r=function(r){if(r!==Object(r))throw new Error("value is not a non-null object");var n=r.valueOf(e,t);return n!==r.valueOf()?n:(s(r),r.valueOf(e,t))},n=this;if(a?n=Object.create(g.prototype,{get:{value:function(e){return r(e).value},writable:!1,configurable:!1,enumerable:!1},set:{value:function(e,t){r(e).value=t},writable:!1,configurable:!1,enumerable:!1},has:{value:function(e){return"value"in r(e)},writable:!1,configurable:!1,enumerable:!1},"delete":{value:function(e){return delete r(e).value},writable:!1,configurable:!1,enumerable:!1},clear:{value:function(){delete o[t],t=u++,o[t]=e},writable:!1,configurable:!1,enumerable:!1}}):(n.get=function(e){return r(e).value},n.set=function(e,t){r(e).value=t},n.has=function(e){return"value"in r(e)},n["delete"]=function(e){return delete r(e).value},n.clear=function(){delete o[t],t=u++,o[t]=e}),arguments.length>0&&Array.isArray(arguments[0]))for(var c=arguments[0],f=0,l=c.length;l>f;f++)n.set(c[f][0],c[f][1]);return n}),!r){var c=function(){var e=i(),t=u++,r=i();o[t]=e;var n=function(n){if(null===n)return r;var a=n.valueOf(e,t);return a!==n.valueOf()?a:(s(n),n.valueOf(e,t))};return{get:function(e){return n(e).value},set:function(e,t){n(e).value=t},has:function(e){return"value"in n(e)},"delete":function(e){return delete n(e).value},clear:function(){delete o[t],t=u++,o[t]=e}}},f=function(){var e=i();return{get:function(){return e.value},set:function(t,r){e.value=r},has:function(){return"value"in e},"delete":function(){return delete e.value},clear:function(){e=i()}}},l=function(){var e=i();return{get:function(t){return e[t]},set:function(t,r){e[t]=r},has:function(t){return t in e},"delete":function(t){return delete e[t]},clear:function(){e=i()}}};if(!a);e.Map=function p(){var e={number:l(),string:l(),"boolean":l(),object:c(),"function":c(),unknown:c(),undefined:f(),"null":f()},t=0,r=[],n=this;if(a?n=Object.create(p.prototype,{size:{get:function(){return t},configurable:!1,enumerable:!1},get:{value:function(t){return e[typeof t].get(t)},writable:!1,configurable:!1,enumerable:!1},set:{value:function(n,a){this.has(n)||(r.push(n),t++),e[typeof n].set(n,a)},writable:!1,configurable:!1,enumerable:!1},has:{value:function(t){return e[typeof t].has(t)},writable:!1,configurable:!1,enumerable:!1},"delete":{value:function(n){return this.has(n)?(t--,r.splice(r.indexOf(n),1),e[typeof n]["delete"](n)):!1},writable:!1,configurable:!1,enumerable:!1},clear:{value:function(){r.length=0;for(var n in e)e[n].clear();t=0},writable:!1,configurable:!1,enumerable:!1},forEach:{value:function(e,t){for(var n=0,a=r.length;a>n;n++)e.call(t,this.get(r[n]),r[n],this)},writable:!1,configurable:!1,enumerable:!1}}):(n.size=t,n.get=function(t){return e[typeof t].get(t)},n.set=function(n,a){this.has(n)||(r.push(n),this.size=++t),e[typeof n].set(n,a)},n.has=function(t){return e[typeof t].has(t)},n["delete"]=function(n){return this.has(n)?(this.size=--t,r.splice(r.indexOf(n),1),e[typeof n]["delete"](n)):!1},n.clear=function(){r.length=0;for(var n in e)e[n].clear();this.size=t=0},n.forEach=function(e,t){for(var n=0,a=r.length;a>n;n++)e.call(t,this.get(r[n]),r[n],this)}),arguments.length>0&&Array.isArray(arguments[0]))for(var i=arguments[0],o=0,u=i.length;u>o;o++)n.set(i[o][0],i[o][1]);return n}}if(!n){var h=e.Map;e.Map=function v(){var e=new h,t=0,r=[],n=Object.create(v.prototype,{size:{get:function(){return t},configurable:!1,enumerable:!1},get:{value:function(t){return e.get(t)},writable:!1,configurable:!1,enumerable:!1},set:{value:function(n,a){e.has(n)||(r.push(n),t++),e.set(n,a)},writable:!1,configurable:!1,enumerable:!1},has:{value:function(t){return e.has(t)},writable:!1,configurable:!1,enumerable:!1},"delete":{value:function(n){return e.has(n)?(t--,r.splice(r.indexOf(n),1),e["delete"](n)):!1},writable:!1,configurable:!1,enumerable:!1},clear:{value:function(){if("clear"in e)e.clear();else for(var n=0,a=r.length;a>n;n++)e["delete"](r[n]);r.length=0,t=0},writable:!1,configurable:!1,enumerable:!1},forEach:{value:function(e,t){for(var n=0,a=r.length;a>n;n++)e.call(t,this.get(r[n]),r[n],this)},writable:!1,configurable:!1,enumerable:!1}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var a=arguments[0],i=0,o=a.length;o>i;i++)n.set(a[i][0],a[i][1]);return n}}}}(function(){return this||(1,eval)("this")}()),"function"!=typeof TimeoutError){var TimeoutError=function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)};TimeoutError.prototype=hprose.createObject(Error.prototype),TimeoutError.prototype.constructor=TimeoutError}!function(e,t){"use strict";function r(e){var r=Array.prototype.slice.call(arguments,1);return function(){e.apply(t,r)}}function n(e){delete f[e]}function a(e){var t=f[e];if(t)try{t()}finally{n(e)}}function i(e){return f[c]=r.apply(t,e),c++}if(!e.setImmediate){var o=e.document,u=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationOvserver,s={},c=1,f={};s.mutationObserver=function(){var e=[],t=o.createTextNode(""),r=new u(function(){for(;e.length>0;)a(e.shift())});return r.observe(t,{characterData:!0}),function(){var r=i(arguments);return e.push(r),t.data=1&r,r}},s.messageChannel=function(){var t=new e.MessageChannel;return t.port1.onmessage=function(e){a(Number(e.data))},function(){var e=i(arguments);return t.port2.postMessage(e),e}},s.nextTick=function(){return function(){var t=i(arguments);return e.process.nextTick(r(a,t)),t}},s.postMessage=function(){var e=o.createElement("iframe");e.style.display="none",o.documentElement.appendChild(e);var t=e.contentWindow;t.document.write('<script>window.onmessage=function(){parent.postMessage(1, "*");};</script>'),t.document.close();var r=[];return window.addEventListener("message",function(){for(;r.length>0;)a(r.shift())}),function(){var e=i(arguments);return r.push(e),t.postMessage(1,"*"),e}},s.readyStateChange=function(){var e=o.documentElement;return function(){var t=i(arguments),r=o.createElement("script");return r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r),t}},s.setTimeout=function(){return function(){var t=i(arguments);return e.setTimeout(r(a,t),0),t}};var l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"undefined"==typeof e.process||"[object process]"!==Object.prototype.toString.call(e.process)||e.process.browser?o&&"onreadystatechange"in o.createElement("script")?l.setImmediate=s.readyStateChange():o&&u?l.setImmediate=s.mutationObserver():e.MessageChannel?l.setImmediate=s.messageChannel():o&&"postMessage"in e&&"addEventListener"in e?l.setImmediate=s.postMessage():l.setImmediate=s.setTimeout():l.setImmediate=s.nextTick(),l.clearImmediate=n}}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){var t=this;L(t,{_subscribers:{value:[]},resolve:{value:this.resolve.bind(t)},reject:{value:this.reject.bind(t)}}),"function"==typeof e&&I(function(){try{t.resolve(e())}catch(r){t.reject(r)}})}function n(e){return e instanceof r}function a(t){return n(t)||x&&t instanceof e.Promise&&typeof("function"===t.then)}function i(e,t){var n="function"==typeof t?t:function(){return t},a=new r;return F(function(){try{a.resolve(n())}catch(e){a.reject(e)}},e),a}function o(e){var t=new r;return t.reject(e),t}function u(e){var t=new r;return t.resolve(e),t}function s(e){try{var t=e();return u(t)}catch(r){return o(r)}}function c(e){var t=new r;return e(t.resolve,t.reject),t}function f(e){var t=0;return Array.forEach(e,function(){++t}),t}function l(e){return e=a(e)?e:u(e),e.then(function(e){var t=e.length,n=f(e),i=new Array(t);if(0===n)return u(i);var o=new r;return Array.forEach(e,function(e,t){var r=a(e)?e:u(e);r.then(function(e){i[t]=e,0===--n&&o.resolve(i)},o.reject)}),o})}function h(){return l(arguments)}function g(e){return e=a(e)?e:u(e),e.then(function(e){var t=new r;return Array.forEach(e,function(e){var r=a(e)?e:u(e);r.then(t.resolve,t.reject)}),t})}function p(e){return e=a(e)?e:u(e),e.then(function(e){var t=e.length,n=f(e);if(0===n)throw new RangeError("any(): array must not be empty");var i=new Array(t),o=new r;return Array.forEach(e,function(e,t){var r=a(e)?e:u(e);r.then(o.resolve,function(e){i[t]=e,0===--n&&o.reject(i)})}),o})}function v(e){return e=a(e)?e:u(e),e.then(function(e){var t=e.length,n=f(e),i=new Array(t);if(0===n)return u(i);var o=new r;return Array.forEach(e,function(e,t){var r=a(e)?e:u(e);r.whenComplete(function(){i[t]=r.inspect(),0===--n&&o.resolve(i)})}),o})}function d(e){var r=Array.slice(arguments,1);return l(r).then(function(r){return e.apply(t,r)})}function w(e,t){var r=Array.slice(arguments,2);return l(r).then(function(r){return e.apply(t,r)})}function T(e,t){return function(){return l(arguments).then(function(r){return e.apply(t,r)})}}function m(e,t,r){return l(e).then(function(e){return e.forEach(t,r)})}function y(e,t,r){return l(e).then(function(e){return e.every(t,r)})}function b(e,t,r){return l(e).then(function(e){return e.some(t,r)})}function E(e,t,r){return l(e).then(function(e){return e.filter(t,r)})}function S(e,t,r){return l(e).then(function(e){return e.map(t,r)})}function C(e,t,r){return arguments.length>2?l(e).then(function(e){return a(r)||(r=u(r)),r.then(function(r){return e.reduce(t,r)})}):l(e).then(function(e){return e.reduce(t)})}function O(e,t,r){return arguments.length>2?l(e).then(function(e){return a(r)||(r=u(r)),r.then(function(r){return e.reduceRight(t,r)})}):l(e).then(function(e){return e.reduceRight(t)})}function _(e,t,r){I(function(){try{var n=e(r);t.resolve(n)}catch(a){t.reject(a)}})}function A(e,t,r){e?_(e,t,r):t.reject(r)}function j(e,t,r,n,i){function o(a){j(e,t,r,n,a)}function u(e){A(t,n,e)}if(a(i))return i===r?void u(new TypeError("Self resolution")):void i.then(o,u);if(null!==i&&"object"==typeof i||"function"==typeof i){var s;try{s=i.then}catch(c){return void u(c)}if("function"==typeof s){var f=!0;try{return void s.call(i,function(e){f&&(f=!1,o(e))},function(e){f&&(f=!1,u(e))})}catch(c){f&&(f=!1,u(c))}return}}e?_(e,n,i):n.resolve(i)}function M(){var e=new r;L(this,{future:{value:e},complete:{value:e.resolve},completeError:{value:e.reject},isCompleted:{get:function(){return e._state!==k}}})}var k=0,R=1,H=2,L=e.hprose.defineProperties,U=e.hprose.createObject,x="Promise"in e,I=e.setImmediate,F=e.setTimeout,N=e.clearTimeout;L(r,{delayed:{value:i},error:{value:o},sync:{value:s},value:{value:u},all:{value:l},race:{value:g},resolve:{value:u},reject:{value:o},promise:{value:c},isFuture:{value:n},isPromise:{value:a},join:{value:h},any:{value:p},settle:{value:v},attempt:{value:d},run:{value:w},wrap:{value:T},forEach:{value:m},every:{value:y},some:{value:b},filter:{value:E},map:{value:S},reduce:{value:C},reduceRight:{value:O}}),L(r.prototype,{_value:{writable:!0},_reason:{writable:!0},_state:{value:k,writable:!0},resolve:{value:function(e){if(this._state===k){this._state=R,this._value=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();j(r.onfulfill,r.onreject,this,r.next,e)}}}},reject:{value:function(e){if(this._state===k){this._state=H,this._reason=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();r.onreject?_(r.onreject,r.next,e):r.next.reject(e)}}}},then:{value:function(e,t){if("function"!=typeof e&&(e=null),"function"!=typeof t&&(t=null),e||t){var n=new r;return this._state===R?e?j(e,t,this,n,this._value):n.resolve(this._value):this._state===H?t?_(t,n,this._reason):n.reject(this._reason):this._subscribers.push({onfulfill:e,onreject:t,next:n}),n}return this}},inspect:{value:function(){switch(this._state){case k:return{state:"pending"};case R:return{state:"fulfilled",value:this._value};case H:return{state:"rejected",reason:this._reason}}}},catchError:{value:function(e,t){if("function"==typeof t){var r=this;return this["catch"](function(n){if(t(n))return r["catch"](e);throw n})}return this["catch"](e)}},"catch":{value:function(e){return this.then(null,e)}},whenComplete:{value:function(e){return this.then(function(r){var n=e();return n===t?r:(n=a(n)?n:u(n),n.then(function(){return r}))},function(r){var n=e();if(n===t)throw r;return n=a(n)?n:u(n),n.then(function(){throw r})})}},timeout:{value:function(e,t){var n=new r,a=F(function(){n.reject(t||new TimeoutError("timeout"))},e);return this.whenComplete(function(){N(a)}).then(n.resolve,n.reject),n}},delay:{value:function(e){var t=new r;return this.then(function(r){F(function(){t.resolve(r)},e)},t.reject),t}},tap:{value:function(e,t){return this.then(function(r){return e.call(t,r),r})}},spread:{value:function(e,t){return this.then(function(r){return e.apply(t,r)})}},get:{value:function(e){return this.then(function(t){return t[e]})}},set:{value:function(e,t){return this.then(function(r){return r[e]=t,r})}},apply:{value:function(e,t){return t=t||[],this.then(function(r){return l(t).then(function(t){return r[e].apply(r,t)})})}},call:{value:function(e){var t=Array.slice(arguments,1);return this.then(function(r){return l(t).then(function(t){return r[e].apply(r,t)})})}},bind:{value:function(e){var t=Array.slice(arguments);{if(!Array.isArray(e)){t.shift();var r=this;return Object.defineProperty(this,e,{value:function(){var n=Array.slice(arguments);return r.then(function(r){return l(t.concat(n)).then(function(t){return r[e].apply(r,t)})})}}),this}for(var n=0,a=e.length;a>n;++n)t[0]=e[n],this.bind.apply(this,t)}}},forEach:{value:function(e,t){return m(this,e,t)}},every:{value:function(e,t){return y(this,e,t)}},some:{value:function(e,t){return b(this,e,t)}},filter:{value:function(e,t){return E(this,e,t)}},map:{value:function(e,t){return S(this,e,t)}},reduce:{value:function(e,t){return arguments.length>1?C(this,e,t):C(this,e)}},reduceRight:{value:function(e,t){return arguments.length>1?O(this,e,t):O(this,e)}}}),e.hprose.Future=r,e.hprose.Completer=M,e.hprose.resolved=u,e.hprose.rejected=o,e.hprose.deferred=function(){var e=new r;return U(null,{promise:{value:e},resolve:{value:e.resolve},reject:{value:e.reject}})},x||(e.Promise=function(e){r.call(this),e(this.resolve,this.reject)},e.Promise.prototype=U(r.prototype),e.Promise.prototype.constructor=r,L(e.Promise,{all:{value:l},race:{value:g},resolve:{value:u},reject:{value:o}}))}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){return String.fromCharCode(e>>>24&255,e>>>16&255,e>>>8&255,255&e)}function n(e){return String.fromCharCode(255&e,e>>>8&255,e>>>16&255,e>>>24&255)}function a(e){if(/^[\x00-\x7f]*$/.test(e))return e;for(var t=[],r=e.length,n=0,a=0;r>n;++n,++a){var i=e.charCodeAt(n);if(128>i)t[a]=e.charAt(n);else if(2048>i)t[a]=String.fromCharCode(192|i>>6,128|63&i);else{if(!(55296>i||i>57343)){if(r>n+1){var o=e.charCodeAt(n+1);if(56320>i&&o>=56320&&57343>=o){var u=((1023&i)<<10|1023&o)+65536;t[a]=String.fromCharCode(240|u>>18&63,128|u>>12&63,128|u>>6&63,128|63&u),++n;continue}}throw new Error("Malformed string")}t[a]=String.fromCharCode(224|i>>12,128|i>>6&63,128|63&i)}}return t.join("")}function i(e,t){for(var r=new Array(t),n=0,a=0,i=e.length;t>n&&i>a;n++){var o=e.charCodeAt(a++);switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[n]=o;break;case 12:case 13:if(!(i>a))throw new Error("Unfinished UTF-8 octet sequence");r[n]=(31&o)<<6|63&e.charCodeAt(a++);break;case 14:if(!(i>a+1))throw new Error("Unfinished UTF-8 octet sequence");r[n]=(15&o)<<12|(63&e.charCodeAt(a++))<<6|63&e.charCodeAt(a++);break;case 15:if(!(i>a+2))throw new Error("Unfinished UTF-8 octet sequence");var u=((7&o)<<18|(63&e.charCodeAt(a++))<<12|(63&e.charCodeAt(a++))<<6|63&e.charCodeAt(a++))-65536;if(!(u>=0&&1048575>=u))throw new Error("Character outside valid Unicode range: 0x"+u.toString(16));r[n++]=u>>10&1023|55296,r[n]=1023&u|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+o.toString(16))}}return t>n&&(r.length=n),[String.fromCharCode.apply(String,r),a]}function o(e,t){for(var r=[],n=new Array(65535),a=0,i=0,o=e.length;t>a&&o>i;a++){var u=e.charCodeAt(i++);switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[a]=u;break;case 12:case 13:if(!(o>i))throw new Error("Unfinished UTF-8 octet sequence");n[a]=(31&u)<<6|63&e.charCodeAt(i++);break;case 14:if(!(o>i+1))throw new Error("Unfinished UTF-8 octet sequence");n[a]=(15&u)<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++);break;case 15:if(!(o>i+2))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&u)<<18|(63&e.charCodeAt(i++))<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++))-65536;if(!(s>=0&&1048575>=s))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));n[a++]=s>>10&1023|55296,n[a]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}if(a>=65534){var c=a+1;n.length=c,r[r.length]=String.fromCharCode.apply(String,n),t-=c,a=-1}}return a>0&&(n.length=a,r[r.length]=String.fromCharCode.apply(String,n)),[r.join(""),i]}function u(e,r){return(r===t||null===r||0>r)&&(r=e.length),0===r?["",0]:/^[\x00-\x7f]*$/.test(e)||!/^[\x00-\xff]*$/.test(e)?r===e.length?[e,r]:[e.substr(0,r),r]:1e5>r?i(e,r):o(e,r)}function s(e){return u(e)[0]}function c(e){var t=e.length;if(/^[\x00-\x7f]*$/.test(str))return t;for(var r=0,n=0;t>n;++n){var a=e.charCodeAt(n);if(128>a)++r;else if(2048>a)r+=2;else{if(!(55296>a||a>57343)){if(t>n+1){var i=e.charCodeAt(n+1);if(56320>a&&i>=56320&&57343>=i){++n,r+=4;continue}}throw new Error("Malformed string")}r+=3}}return r}function f(e){var t=e.length;if(/^[\x00-\x7f]*$/.test(e)||!/^[\x00-\xff]*$/.test(e))return t;for(var r=0,n=0;t>n;++n,++r){var a=e.charCodeAt(n);switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(!(t>n))throw new Error("Unfinished UTF-8 octet sequence");++n;break;case 14:if(!(t>n+1))throw new Error("Unfinished UTF-8 octet sequence");n+=2;break;case 15:if(!(n+2<len))throw new Error("Unfinished UTF-8 octet sequence");var i=((7&a)<<18|(63&e.charCodeAt(n++))<<12|(63&e.charCodeAt(n++))<<6|63&e.charCodeAt(n++))-65536;if(!(i>=0&&1048575>=i))throw new Error("Character outside valid Unicode range: 0x"+i.toString(16));++r;break;default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}}return r}function l(){var e=arguments;switch(e.length){case 1:this._buffer=[e[0].toString()];break;case 2:this._buffer=[e[0].toString().substr(e[1])];break;case 3:this._buffer=[e[0].toString().substr(e[1],e[2])];break;default:this._buffer=[""]}this.mark()}var h=e.hprose.defineProperties;h(l.prototype,{_buffer:{writable:!0},_off:{value:0,writable:!0},_wmark:{writable:!0},_rmark:{writable:!0},toString:{value:function(){return this._buffer.length>1&&(this._buffer=[this._buffer.join("")]),this._buffer[0]}},length:{get:function(){return this.toString().length}},position:{get:function(){return this._off}},mark:{value:function(){this._wmark=this.length(),this._rmark=this._off}},reset:{value:function(){this._buffer=[this.toString().substr(0,this._wmark)],this._off=this._rmark}},clear:{value:function(){this._buffer=[""],this._wmark=0,this._off=0,this._rmark=0}},writeByte:{value:function(e){this._buffer.push(String.fromCharCode(255&e))}},writeInt32BE:{value:function(e){if(e===(0|e)&&2147483647>=e)return void this._buffer.push(r(e));throw new TypeError("value is out of bounds")}},writeUInt32BE:{value:function(e){if((2147483647&e)+2147483648===e&&e>=0)return void this._buffer.push(r(0|e));throw new TypeError("value is out of bounds")}},writeInt32LE:{value:function(e){if(e===(0|e)&&2147483647>=e)return void this._buffer.push(n(e));throw new TypeError("value is out of bounds")}},writeUInt32LE:{value:function(e){if((2147483647&e)+2147483648===e&&e>=0)return void this._buffer.push(n(0|e));throw new TypeError("value is out of bounds")}},writeUTF16AsUTF8:{value:function(e){this._buffer.push(a(e))}},writeUTF8AsUTF16:{value:function(e){this._buffer.push(s(e))}},write:{value:function(e){this._buffer.push(e)}},readByte:{value:function(){return this._off<this.length()?this._buffer[0].charCodeAt(this._off++):-1}},readChar:{value:function(){return this._off<this.length()?this._buffer[0].charAt(this._off++):""}},readInt32BE:{value:function(){var e=this.length(),t=this._buffer[0],r=this._off;if(e>r+3){var n=t.charCodeAt(r++)<<24|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<8|t.charCodeAt(r++);return this._off=r,n}throw new Error("EOF")}},readUInt32BE:{value:function(){var e=this.readInt32BE();return 0>e?(2147483647&e)+2147483648:e}},readInt32LE:{value:function(){var e=this.length(),t=this._buffer[0],r=this._off;if(e>r+3){var n=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;return this._off=r,n}throw new Error("EOF")}},readUInt32LE:{value:function(){var e=this.readInt32LE();return 0>e?(2147483647&e)+2147483648:e}},read:{value:function(e){var t=this._off,r=this.length();return t+e>r&&(e=r-t),0===e?"":(this._off=t+e,this._buffer[0].substring(t,this._off))}},skip:{value:function(e){var t=this.length();return this._off+e>t?(e=t-this._off,this._off=t):this._off+=e,e}},readString:{value:function(e){var t=this.length(),r=this._off,n=this._buffer[0],a=n.indexOf(e,r);return-1===a?(n=n.substr(r),this._off=t):(n=n.substring(r,a+1),this._off=a+1),n}},readUntil:{value:function(e){var t=this.length(),r=this._off,n=this._buffer[0],a=n.indexOf(e,r);return a===this._off?(n="",this._off++):-1===a?(n=n.substr(r),this._off=t):(n=n.substring(r,a),this._off=a+1),n}},readUTF8AsUTF16:{value:function(e){var t=this.length(),r=u(this._buffer[0].substring(this._off,t),e);return this._off+=r[1],r[0]}},readUTF16AsUTF8:{value:function(e){return a(this.read(e))}},take:{value:function(){var e=this.toString();return this.clear(),e}},clone:{value:function(){return new l(this.toString())}},trunc:{value:function(){var e=this.toString().substring(this._off,this._length);this._buffer[0]=e,this._off=0,this._wmark=0,this._rmark=0}}}),h(l,{utf8Encode:{value:a},utf8Decode:{value:s},utf8Length:{value:c},utf16Length:{value:f}}),e.hprose.StringIO=l}(function(){return this||(1,eval)("this")}()),function(e){"use strict";e.HproseTags=e.hprose.Tags={TagInteger:"i",TagLong:"l",TagDouble:"d",TagNull:"n",TagEmpty:"e",TagTrue:"t",TagFalse:"f",TagNaN:"N",TagInfinity:"I",TagDate:"D",TagTime:"T",TagUTC:"Z",TagBytes:"b",TagUTF8Char:"u",TagString:"s",TagGuid:"g",TagList:"a",TagMap:"m",TagClass:"c",TagObject:"o",TagRef:"r",TagPos:"+",TagNeg:"-",TagSemicolon:";",TagOpenbrace:"{",TagClosebrace:"}",TagQuote:'"',TagPoint:".",TagFunctions:"F",TagCall:"C",TagResult:"R",TagArgument:"A",TagError:"E",TagEnd:"z"}}(function(){return this||(1,eval)("this")}()),function(e){"use strict";function t(e,t){u.set(e,t),o[t]=e}function r(e){return u.get(e)}function n(e){return o[e]}var a=e.WeakMap,i=e.hprose.createObject,o=i(null),u=new a;e.HproseClassManager=e.hprose.ClassManager=i(null,{register:{value:t},getClassAlias:{value:r},getClass:{value:n}}),e.hprose.register=t,t(Object,"Object")}(function(){return this||(1,eval)("this")}());var HproseRawReader,HproseReader,HproseWriter;!function(e){"use strict";function t(t){var r,n=e,a=t.split(".");for(r=0;r<a.length;r++)if(n=n[a[r]],void 0===n)return null;return n}function r(e,n,a,i){if(a<n.length){var o=n[a];e[o]=i;var u=r(e,n,a+1,".");return a+1<n.length&&null===u&&(u=r(e,n,a+1,"_")),u}var s=e.join("");try{var c=t(s);return"function"==typeof c?c:null}catch(f){return null}}function n(e){var n=c.getClass(e);if(n)return n;if(n=t(e),"function"==typeof n)return c.register(n,e),n;for(var a=[],i=e.indexOf("_");i>=0;)a[a.length]=i,i=e.indexOf("_",i+1);if(a.length>0){var o=e.split("");if(n=r(o,a,0,"."),null===n&&(n=r(o,a,0,"_")),"function"==typeof n)return c.register(n,e),n}return n=function(){this.getClassName=function(){return e}},c.register(n,e),n}function a(e){return 0===e&&1/e===-(1/0)}function i(e){if(void 0===e||void 0===e.constructor)return"";var t=e.constructor,r=c.getClassAlias(t);if(r)return r;var n=t.toString();return r=n.substr(0,n.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/gi,""),""===r||"Object"===r?"function"==typeof e.getClassName?e.getClassName():"Object":("Object"!==r&&c.register(t,r),r)}function o(e,t){if(e&&t)throw new Error('Tag "'+t+'" expected, but "'+e+'" found in stream');
if(e)throw new Error('Unexpected serialize tag "'+e+'" in stream');throw new Error("No byte found in stream")}function u(){var e=[];return{set:function(t){e[e.length]=t},read:function(t){return e[t]},reset:function(){e.length=0}}}var s=HproseTags,c=HproseClassManager;HproseRawReader=function(e){function t(c,f){switch(void 0===c&&(c=new HproseStringOutputStream),void 0===f&&(f=e.getc()),c.write(f),f){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case s.TagNull:case s.TagEmpty:case s.TagTrue:case s.TagFalse:case s.TagNaN:break;case s.TagInfinity:case s.TagUTF8Char:c.write(e.getc());break;case s.TagInteger:case s.TagLong:case s.TagDouble:case s.TagRef:r(c);break;case s.TagDate:case s.TagTime:n(c);break;case s.TagString:a(c);break;case s.TagGuid:i(c);break;case s.TagList:case s.TagMap:case s.TagObject:u(c);break;case s.TagClass:u(c),t(c);break;case s.TagError:t(c);break;default:o(f)}return c}function r(t){var r;do r=e.getc(),t.write(r);while(r!==s.TagSemicolon)}function n(t){var r;do r=e.getc(),t.write(r);while(r!==s.TagSemicolon&&r!==s.TagUTC)}function a(t){var r=e.readuntil(s.TagQuote);t.write(r),t.write(s.TagQuote);var n=0;r.length>0&&(n=parseInt(r,10)),t.write(e.read(n+1))}function i(t){t.write(e.read(38))}function u(r){var n;do n=e.getc(),r.write(n);while(n!==s.TagOpenbrace);for(;(n=e.getc())!==s.TagClosebrace;)t(r,n);r.write(n)}this.readRaw=t};var f={set:function(){},read:function(){o(s.TagRef)},reset:function(){}};HproseReader=function(e,t,r){function a(t,r){void 0===r&&(r=e.getc()),r!==t&&o(r,t)}function i(t,r){return void 0===r&&(r=e.getc()),t.indexOf(r)>=0?r:void o(r,t)}function c(t){var r=e.readuntil(t);return 0===r.length?0:parseInt(r,10)}function l(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:return h();case s.TagLong:return p();case s.TagDouble:return d();case s.TagNull:return null;case s.TagEmpty:return"";case s.TagTrue:return!0;case s.TagFalse:return!1;case s.TagNaN:return NaN;case s.TagInfinity:return T();case s.TagDate:return y();case s.TagTime:return E();case s.TagUTF8Char:return e.getc();case s.TagString:return O();case s.TagGuid:return A();case s.TagList:return M();case s.TagMap:return r?L():R();case s.TagClass:return F(),I();case s.TagObject:return x();case s.TagRef:return N();case s.TagError:throw new Error(_());default:o(t)}}function h(){return c(s.TagSemicolon)}function g(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:return h();default:o(t)}}function p(){var t=e.readuntil(s.TagSemicolon),r=parseInt(t,10);return r.toString()===t?r:t}function v(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:case s.TagLong:return p();default:o(t)}}function d(){return parseFloat(e.readuntil(s.TagSemicolon))}function w(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:case s.TagLong:case s.TagDouble:return d();case s.TagNaN:return NaN;case s.TagInfinity:return T();default:o(t)}}function T(){return e.getc()===s.TagNeg?-(1/0):1/0}function m(){var t=e.getc();switch(t){case s.TagTrue:return!0;case s.TagFalse:return!1;default:o(t)}}function y(){var t,r=parseInt(e.read(4),10),n=parseInt(e.read(2),10)-1,a=parseInt(e.read(2),10),i=e.getc();if(i===s.TagTime){var o=parseInt(e.read(2),10),u=parseInt(e.read(2),10),c=parseInt(e.read(2),10),f=0;i=e.getc(),i===s.TagPoint&&(f=parseInt(e.read(3),10),i=e.getc(),i>="0"&&"9">=i&&(e.skip(2),i=e.getc(),i>="0"&&"9">=i&&(e.skip(2),i=e.getc()))),t=i===s.TagUTC?new Date(Date.UTC(r,n,a,o,u,c,f)):new Date(r,n,a,o,u,c,f)}else t=i===s.TagUTC?new Date(Date.UTC(r,n,a)):new Date(r,n,a);return W.set(t),t}function b(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagDate:return y();case s.TagRef:return N();default:o(t)}}function E(){var t,r=parseInt(e.read(2),10),n=parseInt(e.read(2),10),a=parseInt(e.read(2),10),i=0,o=e.getc();return o===s.TagPoint&&(i=parseInt(e.read(3),10),o=e.getc(),o>="0"&&"9">=o&&(e.skip(2),o=e.getc(),o>="0"&&"9">=o&&(e.skip(2),o=e.getc()))),t=o===s.TagUTC?new Date(Date.UTC(1970,0,1,r,n,a,i)):new Date(1970,0,1,r,n,a,i),W.set(t),t}function S(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagTime:return E();case s.TagRef:return N();default:o(t)}}function C(){var t=e.read(c(s.TagQuote));return e.skip(1),t}function O(){var e=C();return W.set(e),e}function _(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagEmpty:return"";case s.TagUTF8Char:return e.getc();case s.TagString:return O();case s.TagRef:return N();default:o(t)}}function A(){e.skip(1);var t=e.read(36);return e.skip(1),W.set(t),t}function j(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagGuid:return A();case s.TagRef:return N();default:o(t)}}function M(){var t=[];W.set(t);for(var r=c(s.TagOpenbrace),n=0;r>n;n++)t[n]=l();return e.skip(1),t}function k(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagList:return M();case s.TagRef:return N();default:o(t)}}function R(){var t={};W.set(t);for(var r=c(s.TagOpenbrace),n=0;r>n;n++){var a=l(),i=l();t[a]=i}return e.skip(1),t}function H(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagMap:return R();case s.TagRef:return N();default:o(t)}}function L(){var t=new Map;W.set(t);for(var r=c(s.TagOpenbrace),n=0;r>n;n++){var a=l(),i=l();t.set(a,i)}return e.skip(1),t}function U(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagMap:return L();case s.TagRef:return N();default:o(t)}}function x(){var t=P[c(s.TagOpenbrace)],r=new t.classname;W.set(r);for(var n=0;n<t.count;n++)r[t.fields[n]]=l();return e.skip(1),r}function I(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagClass:return F(),I();case s.TagObject:return x();case s.TagRef:return N();default:o(t)}}function F(){for(var t=C(),r=c(s.TagOpenbrace),a=[],i=0;r>i;i++)a[i]=_();e.skip(1),t=n(t),P[P.length]={classname:t,count:r,fields:a}}function N(){return W.read(c(s.TagSemicolon))}function D(){P.length=0,W.reset()}HproseRawReader.call(this,e);var P=[],W=t?f:u();this.checkTag=a,this.checkTags=i,this.unserialize=l,this.readInteger=g,this.readLong=v,this.readDouble=w,this.readBoolean=m,this.readDateWithoutTag=y,this.readDate=b,this.readTimeWithoutTag=E,this.readTime=S,this.readStringWithoutTag=O,this.readString=_,this.readGuidWithoutTag=A,this.readGuid=j,this.readListWithoutTag=M,this.readList=k,this.readMapWithoutTag=R,this.readMap=H,this.readHarmonyMapWithoutTag=L,this.readHarmonyMap=U,this.readObjectWithoutTag=x,this.readObject=I,this.reset=D};var l={set:function(){},write:function(){return!1},reset:function(){}},h=function(e){var t=new Map,r=0;return{set:function(e){t.set(e,r++)},write:function(r){var n=t.get(r);return void 0!==n?(e.write(s.TagRef+n+s.TagSemicolon),!0):!1},reset:function(){t=new Map,r=0}}};HproseWriter=function(e,t){function r(e){if(void 0===e||null===e||e.constructor===Function)return void g();if(""===e)return void p();switch(e.constructor){case Boolean:v(e);break;case Number:n(e);break;case String:1===e.length?E(e):C(e);break;case Date:m(e);break;case Map:k(e);break;default:if(Array.isArray(e))_(e);else{var t=i(e);"Object"===t?j(e):H(e)}}}function n(t){t=t.valueOf(),a(t)?e.write(s.TagInteger+"-0"+s.TagSemicolon):t===(0|t)?t>=0&&9>=t?e.write(""+t):e.write(s.TagInteger+t+s.TagSemicolon):u(t)}function o(t){t>=0&&9>=t?e.write(""+t):(-2147483648>t||t>2147483647?e.write(s.TagLong):e.write(s.TagInteger),e.write(""+t+s.TagSemicolon))}function u(t){isNaN(t)?c():isFinite(t)?(a(t)&&(t="-0"),e.write(s.TagDouble+t+s.TagSemicolon)):f(t>0)}function c(){e.write(s.TagNaN)}function f(t){e.write(s.TagInfinity+(t?s.TagPos:s.TagNeg))}function g(){e.write(s.TagNull)}function p(){e.write(s.TagEmpty)}function v(t){e.write(t.valueOf()?s.TagTrue:s.TagFalse)}function d(t){F.set(t);var r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),a=("00"+t.getUTCDate()).slice(-2),i=("00"+t.getUTCHours()).slice(-2),o=("00"+t.getUTCMinutes()).slice(-2),u=("00"+t.getUTCSeconds()).slice(-2),c=("000"+t.getUTCMilliseconds()).slice(-3);e.write(s.TagDate+r+n+a+s.TagTime+i+o+u),"000"!==c&&e.write(s.TagPoint+c),e.write(s.TagUTC)}function w(e){F.write(e)||d(e)}function T(t){F.set(t);var r=("0000"+t.getFullYear()).slice(-4),n=("00"+(t.getMonth()+1)).slice(-2),a=("00"+t.getDate()).slice(-2),i=("00"+t.getHours()).slice(-2),o=("00"+t.getMinutes()).slice(-2),u=("00"+t.getSeconds()).slice(-2),c=("000"+t.getMilliseconds()).slice(-3);"00"===i&&"00"===o&&"00"===u&&"000"===c?e.write(s.TagDate+r+n+a):"1970"===r&&"01"===n&&"01"===a?(e.write(s.TagTime+i+o+u),"000"!==c&&e.write(s.TagPoint+c)):(e.write(s.TagDate+r+n+a+s.TagTime+i+o+u),"000"!==c&&e.write(s.TagPoint+c)),e.write(s.TagSemicolon)}function m(e){F.write(e)||T(e)}function y(t){F.set(t);var r=("00"+t.getHours()).slice(-2),n=("00"+t.getMinutes()).slice(-2),a=("00"+t.getSeconds()).slice(-2),i=("000"+t.getMilliseconds()).slice(-3);e.write(s.TagTime+r+n+a),"000"!==i&&e.write(s.TagPoint+i),e.write(s.TagSemicolon)}function b(e){F.write(e)||y(e)}function E(t){e.write(s.TagUTF8Char+t)}function S(t){F.set(t),e.write(s.TagString+(t.length>0?t.length:"")+s.TagQuote+t+s.TagQuote)}function C(e){F.write(e)||S(e)}function O(t){F.set(t);var n=t.length;e.write(s.TagList+(n>0?n:"")+s.TagOpenbrace);for(var a=0;n>a;a++)r(t[a]);e.write(s.TagClosebrace)}function _(e){F.write(e)||O(e)}function A(t){F.set(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&"function"!=typeof t[a]&&(n[n.length]=a);var i=n.length;e.write(s.TagMap+(i>0?i:"")+s.TagOpenbrace);for(var o=0;i>o;o++)r(n[o]),r(t[n[o]]);e.write(s.TagClosebrace)}function j(e){F.write(e)||A(e)}function M(t){F.set(t);var n=t.size;e.write(s.TagMap+(n>0?n:"")+s.TagOpenbrace),t.forEach(function(e,t){r(t),r(e)}),e.write(s.TagClosebrace)}function k(e){F.write(e)||M(e)}function R(t){var n,a=i(t),o=x[a];if(void 0!==o)n=I[o];else{n=[];for(var u in t)t.hasOwnProperty(u)&&"function"!=typeof t[u]&&(n[n.length]=u.toString());o=L(a,n)}e.write(s.TagObject+o+s.TagOpenbrace),F.set(t);for(var c=n.length,f=0;c>f;f++)r(t[n[f]]);e.write(s.TagClosebrace)}function H(e){F.write(e)||R(e)}function L(t,r){var n=r.length;e.write(s.TagClass+t.length+s.TagQuote+t+s.TagQuote+(n>0?n:"")+s.TagOpenbrace);for(var a=0;n>a;a++)S(r[a]);e.write(s.TagClosebrace);var i=I.length;return x[t]=i,I[i]=r,i}function U(){x={},I.length=0,F.reset()}var x={},I=[],F=t?l:h(e);this.serialize=r,this.writeInteger=o,this.writeDouble=u,this.writeBoolean=v,this.writeUTCDate=d,this.writeUTCDateWithRef=w,this.writeDate=T,this.writeDateWithRef=m,this.writeTime=y,this.writeTimeWithRef=b,this.writeUTF8Char=E,this.writeString=S,this.writeStringWithRef=C,this.writeList=O,this.writeListWithRef=_,this.writeMap=A,this.writeMapWithRef=j,this.writeHarmonyMap=M,this.writeHarmonyMapWithRef=k,this.writeObject=R,this.writeObjectWithRef=H,this.reset=U}}(window);var HproseFormatter={serialize:function(e,t){"use strict";var r=new HproseStringOutputStream,n=new HproseWriter(r,t);return n.serialize(e),r.toString()},unserialize:function(e,t,r){"use strict";var n=new HproseStringInputStream(e),a=new HproseReader(n,t,r);return a.unserialize()}};!function(e){"use strict";e.HproseResultMode=e.hprose.ResultMode={Normal:0,Serialized:1,Raw:2,RawWithEndTag:3},e.hprose.Normal=e.hprose.ResultMode.Normal,e.hprose.Serialized=e.hprose.ResultMode.Serialized,e.hprose.Raw=e.hprose.ResultMode.Raw,e.hprose.RawWithEndTag=e.hprose.ResultMode.RawWithEndTag}(function(){return this||(1,eval)("this")}());var HproseHttpRequest=function(e){"use strict";function t(e){return null===e.readyState&&(e.readyState=0,e.addEventListener("load",function(){e.readyState=4,"function"==typeof e.onreadystatechange&&e.onreadystatechange()},!1)),e}function r(){if(null!==j)return new ActiveXObject(j);for(var e=["MSXML2.XMLHTTP","MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MsXML2.XMLHTTP.2.6","Microsoft.XMLHTTP","Microsoft.XMLHTTP.1.0","Microsoft.XMLHTTP.1"],t=e.length,r=0;t>r;r++)try{var n=new ActiveXObject(e[r]);return j=e[r],n}catch(a){}throw new Error("Could not find an installed XML parser")}function n(){return v?t(new XMLHttpRequest):r()}function a(){var t="Shockwave Flash",r="application/x-shockwave-flash",n="ShockwaveFlash.ShockwaveFlash",a=navigator.plugins,i=navigator.mimeTypes,o=0,u=!1;if(a&&a[t])o=a[t].description,!o||i&&i[r]&&!i[r].enabledPlugin||(o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o=parseInt(o.replace(/^(.*)\..*$/,"$1"),10));else if(e.ActiveXObject)try{u=!0;var s=new ActiveXObject(n);s&&(o=s.GetVariable("$version"),o&&(o=o.split(" ")[1].split(","),o=parseInt(o[0],10)))}catch(c){}return 9>o?0:u?1:2}function i(){var e=a();if(m=e>0){var t=document.createElement("div");t.style.width=0,t.style.height=0,1===e?t.innerHTML=["<object ",'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ','type="application/x-shockwave-flash" ','width="0" height="0" id="',T,'" name="',T,'">','<param name="movie" value="',p,'hproseHttpRequest.swf" />','<param name="allowScriptAccess" value="always" />','<param name="quality" value="high" />','<param name="wmode" value="opaque" />',"</object>"].join(""):t.innerHTML='<embed id="'+T+'" src="'+p+'hproseHttpRequest.swf" type="application/x-shockwave-flash" width="0" height="0" name="'+T+'" allowScriptAccess="always" />',document.body.appendChild(t)}}function o(){if(!_)for(_=!0,d||w||i();C.length>0;){var e=C.shift();"function"==typeof e&&e()}}function u(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(document.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(u(),o())}function c(){if("complete"===document.readyState)setTimeout(o,1);else if(document.addEventListener){if(document.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1),/WebKit/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(t),s())},10)}else if(document.attachEvent){document.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var r=!1;try{r=null===window.frameElement&&document.documentElement}catch(n){}r&&r.doScroll&&!function a(){if(!_){try{r.doScroll("left")}catch(e){return setTimeout(a,15)}u(),o()}}()}else/MSIE/i.test(navigator.userAgent)&&/Windows CE/i.test(navigator.userAgent)?o():e.onload=o}function f(e,t,r,n,a){if(A)y.post(e,t,r,n,a);else{var i=function(){y.post(e,t,r,n,a)};O.push(i)}}function l(t,r,a,i,o){var u,s=n();s.onreadystatechange=function(){if(4===s.readyState)if(s.onreadystatechange=function(){},void 0!==u&&e.clearTimeout(u),200===s.status)M.__callback(i,s.responseText,!0);else{var t=s.status+":"+s.statusText;M.__callback(i,HproseTags.TagError+HproseFormatter.serialize(t,!0)+HproseTags.TagEnd)}},s.open("POST",t,!0),w&&(s.withCredentials="true");for(var c in r)s.setRequestHeader(c,r[c]);var f=function(){M.__callback(i,HproseTags.TagError+HproseFormatter.serialize("timeout",!0)+HproseTags.TagEnd)};void 0===s.timeout?u=e.setTimeout(function(){s.onreadystatechange=function(){},s.abort(),f()},o):(s.timeout=o,s.ontimeout=f),s.send(a)}function h(e,t,r,n,a){!m||d||"http://"!==e.substr(0,7).toLowerCase()&&"https://"!==e.substr(0,8).toLowerCase()?l(e,t,r,n,a):f(e,t,r,n,a)}var g=document.getElementsByTagName("script"),p=g[g.length-1].getAttribute("flashpath")||"";g=null;var v="undefined"!=typeof XMLHttpRequest,d="file:"===location.protocol,w=!d&&v&&"withCredentials"in new XMLHttpRequest,T="hprosehttprequest_as3",m=!1,y=null,b=[],E=[],S=[],C=[],O=[],_=!1,A=!1,j=null,M={};return M.post=function(e,t,r,n,a,i,o){var u=-1,s={client:o,userdata:{}};n&&(u=b.length,b[u]=n,E[u]=i,S[u]=s);for(var c=0,f=i.length;f>c;c++)r=i[c].outputFilter(r,s);if(_)h(e,t,r,u,a);else{var l=function(){h(e,t,r,u,a)};C.push(l)}},M.__callback=function(e,t,r){if(r)for(var n=E[e],a=S[e],i=n.length-1;i>=0;i--)t=n[i].inputFilter(t,a);"function"==typeof b[e]&&b[e](t),delete b[e],delete E[e],delete S[e]},M.__jsReady=function(){return _},M.__setSwfReady=function(){for(y=-1!==navigator.appName.indexOf("Microsoft")?e[T]:document[T],A=!0,e.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(r){}};O.length>0;){var t=O.shift();"function"==typeof t&&t()}},c(),M}(window),HproseHttpClient=function(){"use strict";function e(e,b){function E(e){r.post(A,M,u.TagEnd,function(t){var r=null;try{var a=new n(t),o=new i(a,!0),s=a.getc();switch(s){case u.TagError:r=new Error(o.readString());break;case u.TagFunctions:var c=o.readList();o.checkTag(u.TagEnd),O(e,c);break;default:r=new Error("Wrong Response:\r\n"+t)}}catch(f){r=f}null!==r&&I.onError("useService",r)},k,L,I)}function S(e,t){return function(){return _(e,t,arguments)}}function C(e,t,r,n,a){if(void 0===t[n]&&(t[n]={},(typeof a===f||a.constructor===Object)&&(a=[a]),Array.isArray(a)))for(var i=0;i<a.length;i++){var o=a[i];if(typeof o===f)t[n][o]=S(e,r+n+"_"+o);else for(var u in o)C(e,t[n],n+"_",u,o[u])}}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(typeof n===f)void 0===e[n]&&(e[n]=S(e,n));else for(var a in n)C(e,e,"",a,n[a])}j=!0,I.onReady()}function _(e,s,f){var b,E,S,C=t.Normal;if(!U&&!x.length||U){var O=R,_=H,j=s.toLowerCase();E=e[s+g]||e[s+p]||e[s+v]||e[j+g]||e[j+p]||e[j+v]||I[s+g]||I[s+p]||I[s+v]||I[j+g]||I[j+p]||I[j+v],S=e[s+d]||e[s+w]||e[s+T]||e[s+m]||e[s+y]||e[j+d]||e[j+w]||e[j+T]||e[j+m]||e[j+y]||I[s+d]||I[s+w]||I[s+T]||I[s+m]||I[s+y]||I[j+d]||I[j+w]||I[j+T]||I[j+m]||I[j+y];var F=f.length,N=typeof f[F-5],D=typeof f[F-4],P=typeof f[F-3],W=typeof f[F-2],z=typeof f[F-1];z===c&&W===l&&P===c&&D===h&&N===h?(_=f[F-1],C=f[F-2],O=f[F-3],E=f[F-4],S=f[F-5],delete f[F-1],delete f[F-2],delete f[F-3],delete f[F-4],delete f[F-5],f.length-=5):z===c&&W===l&&P===h&&D===h?(_=f[F-1],C=f[F-2],E=f[F-3],S=f[F-4],delete f[F-1],delete f[F-2],delete f[F-3],delete f[F-4],f.length-=4):z===l&&W===c&&P===h&&D===h?(C=f[F-1],O=f[F-2],E=f[F-3],S=f[F-4],delete f[F-1],delete f[F-2],delete f[F-3],delete f[F-4],f.length-=4):z===c&&W===c&&P===h&&D===h?(_=f[F-1],O=f[F-2],E=f[F-3],S=f[F-4],delete f[F-1],delete f[F-2],delete f[F-3],delete f[F-4],f.length-=4):z===c&&W===h&&P===h?(O=f[F-1],E=f[F-2],S=f[F-3],delete f[F-1],delete f[F-2],delete f[F-3],f.length-=3):z===l&&W===h&&P===h?(C=f[F-1],E=f[F-2],S=f[F-3],delete f[F-1],delete f[F-2],delete f[F-3],f.length-=3):z===h&&W===h?(E=f[F-1],S=f[F-2],delete f[F-1],delete f[F-2],f.length-=2):z===c&&W===l&&P===c&&D===h?(_=f[F-1],C=f[F-2],O=f[F-3],S=f[F-4],delete f[F-1],delete f[F-2],delete f[F-3],delete f[F-4],f.length-=4):z===c&&W===l&&P===h?(_=f[F-1],C=f[F-2],S=f[F-3],delete f[F-1],delete f[F-2],delete f[F-3],f.length-=3):z===l&&W===c&&P===h?(C=f[F-1],O=f[F-2],S=f[F-3],delete f[F-1],delete f[F-2],delete f[F-3],f.length-=3):z===c&&W===c&&P===h?(_=f[F-1],O=f[F-2],S=f[F-3],delete f[F-1],delete f[F-2],delete f[F-3],f.length-=3):z===c&&W===h?(O=f[F-1],S=f[F-2],delete f[F-1],delete f[F-2],f.length-=2):z===l&&W===h?(C=f[F-1],S=f[F-2],delete f[F-1],delete f[F-2],f.length-=2):z===h&&(S=f[F-1],delete f[F-1],f.length--),b=new a(u.TagCall);var X=new o(b,_);X.writeString(s),(f.length>0||O)&&(X.reset(),X.writeList(f),O&&X.writeBoolean(!0)),U?x.push({args:f,fn:s,call:b.toString(),cb:S,eh:E}):b.write(u.TagEnd)}if(!U){var B=x.length,q=!!B,$="";if(q){for(var Q,G=0;B>G;++G)Q=x[G],$+=Q.call,delete Q.call;$+=u.TagEnd}else $=b.toString();var Y=x.slice(0);x.length=0,r.post(A,M,$,function(e){var r,a,o=null,c=null;if(C===t.RawWithEndTag)o=e;else if(C===t.Raw)o=e.substr(0,e.length-1);else{var l,h=new n(e),g=new i(h,!1,I.useHarmonyMap);r=-1;try{for(;(l=h.getc())!==u.TagEnd;)switch(l){case u.TagResult:C===t.Serialized?o=g.readRaw().toString():(g.reset(),o=g.unserialize()),q&&(Y[++r].rs=o,Y[r].ex=null);break;case u.TagArgument:g.reset(),f=g.readList(),q&&(Y[r].args=f);break;case u.TagError:g.reset(),c=new Error(g.readString()),q&&(Y[++r].ex=c);break;default:c=new Error("Wrong Response:\r\n"+e),q&&(Y[++r].ex=c)}}catch(p){c=p,q&&(Y[0>r?0:r>=B?r-1:r].ex=c)}}for(q||(B=1,Y=[{args:f,fn:s,rs:o,cb:S,eh:E,ex:c}]),r=0;B>r;++r)a=Y[r],c=a.ex,S=a.cb,null!==c?(E=a.eh,s=a.fn,E?E(s,c):I.onError(s,c)):S&&S(a.rs,a.args)},k,L,I)}}var A,j=!1,M={"Content-Type":"text/plain"},k=3e4,R=!1,H=!1,L=[],U=!1,x=[],I=this;I.useService=function(e,t,r){typeof t===c&&void 0===r&&(r=t);var n=I;return r&&(n={}),j=!1,void 0===e?new Error("You should set server url first!"):(A=e,(typeof t===f||t&&t.constructor===Object)&&(t=[t]),Array.isArray(t)?O(n,t):E(n),n)},I.invoke=function(){var e=arguments,t=Array.prototype.shift.apply(e);return _(I,t,e)},I.setHeader=function(e,t){"content-type"!==e.toLowerCase()&&(t?M[e]=t:delete M[e])},I.setTimeout=function(e){k=e},I.getTimeout=function(){return k},I.getReady=function(){return j},I.getByRef=function(){return R},I.setByRef=function(e){void 0===e&&(e=!0),R=e},I.getFilter=function(){return 0===L.length?null:L[0]},I.setFilter=function(e){L.length=0,void 0!==e&&null!==e&&L.push(e)},I.addFilter=function(e){L.push(e)},I.removeFilter=function(e){var t=L.indexOf(e);return-1===t?!1:(L.splice(t,1),!0)},I.getSimpleMode=function(){return H},I.setSimpleMode=function(e){void 0===e&&(e=!0),H=e},I.beginBatch=function(){U=!0},I.endBatch=function(){U=!1,x.length&&_()},I.useHarmonyMap=!1,I.onReady=s,I.onError=s,typeof e===f&&I.useService(e,b)}var t=HproseResultMode,r=HproseHttpRequest,n=HproseStringInputStream,a=HproseStringOutputStream,i=HproseReader,o=HproseWriter,u=HproseTags,s=function(){},c="boolean",f="string",l="number",h="function",g="_OnError",p="_onError",v="_onerror",d="_Callback",w="_callback",T="_OnSuccess",m="_onSuccess",y="_onsuccess";return e.create=function(t,r){return new e(t,r)},e}(),JSONRPCClientFilter=function(e){"use strict";var t=1,r={version:"2.0",inputFilter:function(e,t){var r=JSON.parse(e),n=new HproseStringOutputStream,a=new HproseWriter(n,!0);return r.error?(n.write(HproseTags.TagError),a.writeString(r.error.message)):(n.write(HproseTags.TagResult),a.serialize(r.result)),n.write(HproseTags.TagEnd),n.toString()},outputFilter:function(e,r){var n={};"1.1"===this.version?n.version="1.1":"2.0"===this.version&&(n.jsonrpc="2.0");var a=new HproseStringInputStream(e),i=new HproseReader(a,!1),o=a.getc();return o===HproseTags.TagCall&&(n.method=i.readString(),o=a.getc(),o===HproseTags.TagList&&(n.params=i.readListWithoutTag())),n.id=t++,JSON.stringify(n)}};return r}(window);!function(e){"use strict";"function"==typeof define&&(define.cmd?define("hprose",[],e.hprose):define.amd&&define("hprose",[],function(){return e.hprose})),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=e.hprose)}(function(){return this||(1,eval)("this")}());