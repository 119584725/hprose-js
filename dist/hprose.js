// Hprose for JavaScript v1.0.0
// Copyright (c) 2008-2016 http://hprose.com
// Hprose is freely distributable under the MIT license.
// For all details and documentation:
// https://github.com/hprose/hprose-js

function HproseStringInputStream(e){"use strict";var t=0,r=e.length;this.getc=function(){return e.charAt(t++)},this.read=function(r){var n=e.substr(t,r);return this.skip(r),n},this.skip=function(e){t+=e},this.readuntil=function(n){var a,i=e.indexOf(n,t);return i>=0?(a=e.substr(t,i-t),t=i+n.length):(a=e.substr(t),t=r),a}}function HproseStringOutputStream(e){"use strict";void 0===e&&(e="");var t=[e];this.write=function(e){t.push(e)},this.mark=function(){e=this.toString()},this.reset=function(){t=[e]},this.clear=function(){t=[]},this.toString=function(){return t.join("")}}!function(e){"use strict";e.hprose={}}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){return e.length>2&&"is"===e.substr(0,2)?"set"+e.substr(2):"set"+e.charAt(0).toUpperCase()+e.substr(1)}function n(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return function(t){return e.apply(t,Array.prototype.slice.call(arguments,1))}}var a="function"!=typeof Object.defineProperties?function(e,n){for(var a in n){var i=n[a];e[a]=t,"value"in i?e[a]=i.value:("get"in i&&(e[a]=i.get),"set"in i&&(e[r(a)]=i.set))}}:function(e,t){for(var n in t){var a=t[n];"get"in a&&(t[n]={value:a.get}),"set"in a&&(t[r(n)]={value:a.set})}Object.defineProperties(e,t)},i=function(){},o="function"!=typeof Object.create?function(e,t){if("object"!=typeof e&&"function"!=typeof e)throw TypeError("prototype must be an object or function");i.prototype=e;var r=new i;return i.prototype=null,t&&a(r,t),r}:function(e,t){if(t){for(var n in t){var a=t[n];"get"in a&&(t[n]={value:a.get}),"set"in a&&(t[r(n)]={value:a.set})}return Object.create(e,t)}return Object.create(e)};e.hprose.defineProperties=a,e.hprose.createObject=o,e.hprose.generic=n}(function(){return this||(1,eval)("this")}()),function(e,r){"use strict";function n(e,t){for(var r=e.prototype,n=0,a=t.length;a>n;n++){var o=t[n],u=r[o];"function"==typeof u&&"undefined"==typeof e[o]&&(e[o]=i(u))}}if(Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},a=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),a.prototype=new n,a}),"isArray"in Array||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(!this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=+Number(arguments[1])||0;if(Math.abs(n)===1/0&&(n=0),n>=r)return-1;for(var a=Math.max(n>=0?n:r-Math.abs(n),0);r>a;){if(a in t&&t[a]===e)return a;a++}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(!this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return-1;var a=+Number(arguments[1])||0;Math.abs(a)===1/0&&(a=0);for(var i=a>=0?Math.min(a,n-1):n-Math.abs(a);i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=[],a=arguments[1],i=0;r>i;i++)if(i in t){var o=t[i];e.call(a,o,i,t)&&n.push(o)}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=0;r>a;a++)a in t&&e.call(n,t[a],a,t)}),Array.prototype.every||(Array.prototype.every=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=0;r>a;a++)if(a in t&&!e.call(n,t[a],a,t))return!1;return!0}),Array.prototype.map||(Array.prototype.map=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=new Array(r),i=0;r>i;i++)i in t&&(a[i]=e.call(n,t[i],i,t));return a}),Array.prototype.some||(Array.prototype.some=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var n=arguments[1],a=0;r>a;a++)if(a in t&&e.call(n,t[a],a,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("First argument is not callable");if(0===n&&1===arguments.length)throw new TypeError("Array length is 0 and no second argument");var a,i=0;for(arguments.length>=2?a=arguments[1]:(a=t[0],i=1);n>i;++i)i in t&&(a=e.call(r,a,t[i],i,t));return a}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){if(!this)throw new TypeError("this is null or not defined");var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("First argument is not callable");if(0===n&&1===arguments.length)throw new TypeError("Array length is 0 and no second argument");var a,i=n-1;if(arguments.length>=2)a=arguments[1];else for(;;){if(i in t){a=t[i--];break}if(--i<0)throw new TypeError("Array contains no values")}for(;i>=0;)i in t&&(a=e.call(r,a,t[i],i,t)),i--;return a}),String.prototype.trim||(String.prototype.trim=function(){return this.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.toString().replace(/^[\s\xa0]+/,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.toString().replace(/[\s\xa0]+$/,"")}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on non-object");var i=[];for(var o in a)e.call(a,o)&&i.push(o);if(t)for(var u=0;n>u;u++)e.call(a,r[u])&&i.push(r[u]);return i}}()),Date.now||(Date.now=function(){return+new Date}),!Date.prototype.toISOString){var a=function(e){return 10>e?"0"+e:e};Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"}}var i=e.hprose.generic;n(Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"]),n(String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","localeCompare","match","quote","replace","search","slice","split","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight","anchor","big","blink","bold","fixed","fontcolor","fontsize","italics","link","small","strike","sub","sup"])}(function(){return this||(1,eval)("this")}()),function(e){"use strict";var t="WeakMap"in e,r="Map"in e,n=!0;if(r&&(n="forEach"in new e.Map),!(t&&r&&n)){var a="create"in Object,i=function(){return a?Object.create(null):{}},o=i(),u=0,s=function(e){var t=i(),r=e.valueOf;a?Object.defineProperty(e,"valueOf",{value:function(n,a){return this===e&&a in o&&o[a]===n?(a in t||(t[a]=i()),t[a]):r.apply(this,arguments)},writable:!0,configurable:!0,enumerable:!1}):e.valueOf=function(n,a){return this===e&&a in o&&o[a]===n?(a in t||(t[a]=i()),t[a]):r.apply(this,arguments)}};if(t||(e.WeakMap=function h(){var e=i(),t=u++;o[t]=e;var r=function(r){if(r!==Object(r))throw new Error("value is not a non-null object");var n=r.valueOf(e,t);return n!==r.valueOf()?n:(s(r),r.valueOf(e,t))},n=this;if(a?n=Object.create(h.prototype,{get:{value:function(e){return r(e).value},writable:!1,configurable:!1,enumerable:!1},set:{value:function(e,t){r(e).value=t},writable:!1,configurable:!1,enumerable:!1},has:{value:function(e){return"value"in r(e)},writable:!1,configurable:!1,enumerable:!1},"delete":{value:function(e){return delete r(e).value},writable:!1,configurable:!1,enumerable:!1},clear:{value:function(){delete o[t],t=u++,o[t]=e},writable:!1,configurable:!1,enumerable:!1}}):(n.get=function(e){return r(e).value},n.set=function(e,t){r(e).value=t},n.has=function(e){return"value"in r(e)},n["delete"]=function(e){return delete r(e).value},n.clear=function(){delete o[t],t=u++,o[t]=e}),arguments.length>0&&Array.isArray(arguments[0]))for(var c=arguments[0],l=0,f=c.length;f>l;l++)n.set(c[l][0],c[l][1]);return n}),!r){var c=function(){var e=i(),t=u++,r=i();o[t]=e;var n=function(n){if(null===n)return r;var a=n.valueOf(e,t);return a!==n.valueOf()?a:(s(n),n.valueOf(e,t))};return{get:function(e){return n(e).value},set:function(e,t){n(e).value=t},has:function(e){return"value"in n(e)},"delete":function(e){return delete n(e).value},clear:function(){delete o[t],t=u++,o[t]=e}}},l=function(){var e=i();return{get:function(){return e.value},set:function(t,r){e.value=r},has:function(){return"value"in e},"delete":function(){return delete e.value},clear:function(){e=i()}}},f=function(){var e=i();return{get:function(t){return e[t]},set:function(t,r){e[t]=r},has:function(t){return t in e},"delete":function(t){return delete e[t]},clear:function(){e=i()}}};if(!a);e.Map=function p(){var e={number:f(),string:f(),"boolean":f(),object:c(),"function":c(),unknown:c(),undefined:l(),"null":l()},t=0,r=[],n=this;if(a?n=Object.create(p.prototype,{size:{get:function(){return t},configurable:!1,enumerable:!1},get:{value:function(t){return e[typeof t].get(t)},writable:!1,configurable:!1,enumerable:!1},set:{value:function(n,a){this.has(n)||(r.push(n),t++),e[typeof n].set(n,a)},writable:!1,configurable:!1,enumerable:!1},has:{value:function(t){return e[typeof t].has(t)},writable:!1,configurable:!1,enumerable:!1},"delete":{value:function(n){return this.has(n)?(t--,r.splice(r.indexOf(n),1),e[typeof n]["delete"](n)):!1},writable:!1,configurable:!1,enumerable:!1},clear:{value:function(){r.length=0;for(var n in e)e[n].clear();t=0},writable:!1,configurable:!1,enumerable:!1},forEach:{value:function(e,t){for(var n=0,a=r.length;a>n;n++)e.call(t,this.get(r[n]),r[n],this)},writable:!1,configurable:!1,enumerable:!1}}):(n.size=t,n.get=function(t){return e[typeof t].get(t)},n.set=function(n,a){this.has(n)||(r.push(n),this.size=++t),e[typeof n].set(n,a)},n.has=function(t){return e[typeof t].has(t)},n["delete"]=function(n){return this.has(n)?(this.size=--t,r.splice(r.indexOf(n),1),e[typeof n]["delete"](n)):!1},n.clear=function(){r.length=0;for(var n in e)e[n].clear();this.size=t=0},n.forEach=function(e,t){for(var n=0,a=r.length;a>n;n++)e.call(t,this.get(r[n]),r[n],this)}),arguments.length>0&&Array.isArray(arguments[0]))for(var i=arguments[0],o=0,u=i.length;u>o;o++)n.set(i[o][0],i[o][1]);return n}}if(!n){var g=e.Map;e.Map=function v(){var e=new g,t=0,r=[],n=Object.create(v.prototype,{size:{get:function(){return t},configurable:!1,enumerable:!1},get:{value:function(t){return e.get(t)},writable:!1,configurable:!1,enumerable:!1},set:{value:function(n,a){e.has(n)||(r.push(n),t++),e.set(n,a)},writable:!1,configurable:!1,enumerable:!1},has:{value:function(t){return e.has(t)},writable:!1,configurable:!1,enumerable:!1},"delete":{value:function(n){return e.has(n)?(t--,r.splice(r.indexOf(n),1),e["delete"](n)):!1},writable:!1,configurable:!1,enumerable:!1},clear:{value:function(){if("clear"in e)e.clear();else for(var n=0,a=r.length;a>n;n++)e["delete"](r[n]);r.length=0,t=0},writable:!1,configurable:!1,enumerable:!1},forEach:{value:function(e,t){for(var n=0,a=r.length;a>n;n++)e.call(t,this.get(r[n]),r[n],this)},writable:!1,configurable:!1,enumerable:!1}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var a=arguments[0],i=0,o=a.length;o>i;i++)n.set(a[i][0],a[i][1]);return n}}}}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){var r=[].slice.call(arguments,1);return function(){e.apply(t,r)}}function n(e){delete f[e]}function a(t){if(g)e.setTimeout(r(a,t),0);else{var i=f[t];if(i){g=!0;try{i()}finally{n(t),g=!1}}}}function i(e){return f[l]=r.apply(t,e),l++}function o(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}var u=e.navigator&&/Trident/.test(e.navigator.userAgent);if(!u&&(e.msSetImmediate||e.setImmediate))return void(e.setImmediate||(e.setImmediate=e.msSetImmediate,e.clearImmediate=e.msClearImmediate));var s=e.document,c={},l=1,f={},g=!1;c.messageChannel=function(){var t=new e.MessageChannel;return t.port1.onmessage=function(e){a(Number(e.data))},function(){var e=i(arguments);return t.port2.postMessage(e),e}},c.nextTick=function(){return function(){var t=i(arguments);return e.process.nextTick(r(a,t)),t}},c.postMessage=function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a(Number(r.data.slice(t.length)))};return e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),function(){var r=i(arguments);return e.postMessage(t+r,"*"),r}},c.readyStateChange=function(){var e=s.documentElement;return function(){var t=i(arguments),r=s.createElement("script");return r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r),t}},c.setTimeout=function(){return function(){var t=i(arguments);return e.setTimeout(r(a,t),0),t}};var h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,u?h.setImmediate=c.setTimeout():"[object process]"==={}.toString.call(e.process)?h.setImmediate=c.nextTick():o()?h.setImmediate=c.postMessage():e.MessageChannel?h.setImmediate=c.messageChannel():s&&"onreadystatechange"in s.createElement("script")?h.setImmediate=c.readyStateChange():h.setImmediate=c.setTimeout(),h.msSetImmediate=h.setImmediate,h.clearImmediate=n,h.msClearImmediate=n}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){var t=this;k(t,{_subscribers:{value:[]},resolve:{value:this.resolve.bind(t)},reject:{value:this.reject.bind(t)}}),"function"==typeof e&&x(function(){try{t.resolve(e())}catch(r){t.reject(r)}})}function n(e){return e instanceof r}function a(t){return n(t)||N&&t instanceof e.Promise&&typeof("function"===t.then)}function i(e,t){var n="function"==typeof t?t:function(){return t},a=new r;return D(function(){try{a.resolve(n())}catch(e){a.reject(e)}},e),a}function o(e){var t=new r;return t.reject(e),t}function u(e){var t=new r;return t.resolve(e),t}function s(e){try{var t=e();return u(t)}catch(r){return o(r)}}function c(e){var t=new r;return e(t.resolve,t.reject),t}function l(e){var t=0;return Array.forEach(e,function(){++t}),t}function f(e){return e=a(e)?e:u(e),e.then(function(e){var t=e.length,n=l(e),i=new Array(t);if(0===n)return u(i);var o=new r;return Array.forEach(e,function(e,t){var r=a(e)?e:u(e);r.then(function(e){i[t]=e,0===--n&&o.resolve(i)},o.reject)}),o})}function g(){return f(arguments)}function h(e){return e=a(e)?e:u(e),e.then(function(e){var t=new r;return Array.forEach(e,function(e){var r=a(e)?e:u(e);r.then(t.resolve,t.reject)}),t})}function p(e){return e=a(e)?e:u(e),e.then(function(e){var t=e.length,n=l(e);if(0===n)throw new RangeError("any(): array must not be empty");var i=new Array(t),o=new r;return Array.forEach(e,function(e,t){var r=a(e)?e:u(e);r.then(o.resolve,function(e){i[t]=e,0===--n&&o.reject(i)})}),o})}function v(e){return e=a(e)?e:u(e),e.then(function(e){var t=e.length,n=l(e),i=new Array(t);if(0===n)return u(i);var o=new r;return Array.forEach(e,function(e,t){var r=a(e)?e:u(e);r.whenComplete(function(){i[t]=r.inspect(),0===--n&&o.resolve(i)})}),o})}function d(e){var r=Array.slice(arguments,1);return f(r).then(function(r){return e.apply(t,r)})}function T(e,t){var r=Array.slice(arguments,2);return f(r).then(function(r){return e.apply(t,r)})}function m(e,t){return function(){return f(arguments).then(function(r){return e.apply(t,r)})}}function w(e,t,r){return f(e).then(function(e){return e.forEach(t,r)})}function y(e,t,r){return f(e).then(function(e){return e.every(t,r)})}function b(e,t,r){return f(e).then(function(e){return e.some(t,r)})}function S(e,t,r){return f(e).then(function(e){return e.filter(t,r)})}function O(e,t,r){return f(e).then(function(e){return e.map(t,r)})}function E(e,t,r){return arguments.length>2?f(e).then(function(e){return a(r)||(r=u(r)),r.then(function(r){return e.reduce(t,r)})}):f(e).then(function(e){return e.reduce(t)})}function j(e,t,r){return arguments.length>2?f(e).then(function(e){return a(r)||(r=u(r)),r.then(function(r){return e.reduceRight(t,r)})}):f(e).then(function(e){return e.reduceRight(t)})}function M(e,t,r){x(function(){try{var n=e(r);t.resolve(n)}catch(a){t.reject(a)}})}function C(e,t,r){e?M(e,t,r):t.reject(r)}function R(e,t,r,n,i){function o(a){R(e,t,r,n,a)}function u(e){C(t,n,e)}if(a(i))return i===r?void u(new TypeError("Self resolution")):void i.then(o,u);if(null!==i&&"object"==typeof i||"function"==typeof i){var s;try{s=i.then}catch(c){return void u(c)}if("function"==typeof s){var l=!0;try{return void s.call(i,function(e){l&&(l=!1,o(e))},function(e){l&&(l=!1,u(e))})}catch(c){l&&(l=!1,u(c))}return}}e?M(e,n,i):n.resolve(i)}function A(){var e=new r;k(this,{future:{value:e},complete:{value:e.resolve},completeError:{value:e.reject},isCompleted:{get:function(){return e._state!==H}}})}var H=0,I=1,L=2,k=e.hprose.defineProperties,_=e.hprose.createObject,N="Promise"in e,x=e.setImmediate,D=e.setTimeout,F=e.clearTimeout;k(r,{delayed:{value:i},error:{value:o},sync:{value:s},value:{value:u},all:{value:f},race:{value:h},resolve:{value:u},reject:{value:o},promise:{value:c},isFuture:{value:n},isPromise:{value:a},join:{value:g},any:{value:p},settle:{value:v},attempt:{value:d},run:{value:T},wrap:{value:m},forEach:{value:w},every:{value:y},some:{value:b},filter:{value:S},map:{value:O},reduce:{value:E},reduceRight:{value:j}}),k(r.prototype,{_value:{writable:!0},_reason:{writable:!0},_state:{value:H,writable:!0},resolve:{value:function(e){if(this._state===H){this._state=I,this._value=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();R(r.onfulfill,r.onreject,this,r.next,e)}}}},reject:{value:function(e){if(this._state===H){this._state=L,this._reason=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();r.onreject?M(r.onreject,r.next,e):r.next.reject(e)}}}},then:{value:function(e,t){if("function"!=typeof e&&(e=null),"function"!=typeof t&&(t=null),e||t){var n=new r;return this._state===I?e?R(e,t,this,n,this._value):n.resolve(this._value):this._state===L?t?M(t,n,this._reason):n.reject(this._reason):this._subscribers.push({onfulfill:e,onreject:t,next:n}),n}return this}},inspect:{value:function(){switch(this._state){case H:return{state:"pending"};case I:return{state:"fulfilled",value:this._value};case L:return{state:"rejected",reason:this._reason}}}},catchError:{value:function(e,t){if("function"==typeof t){var r=this;return this["catch"](function(n){if(t(n))return r["catch"](e);throw n})}return this["catch"](e)}},"catch":{value:function(e){return this.then(null,e)}},whenComplete:{value:function(e){return this.then(function(r){var n=e();return n===t?r:(n=a(n)?n:u(n),n.then(function(){return r}))},function(r){var n=e();if(n===t)throw r;return n=a(n)?n:u(n),n.then(function(){throw r})})}},timeout:{value:function(e,t){var n=new r,a=D(function(){n.reject(t||new TimeoutError("timeout"))},e);return this.whenComplete(function(){F(a)}).then(n.resolve,n.reject),n}},delay:{value:function(e){var t=new r;return this.then(function(r){D(function(){t.resolve(r)},e)},t.reject),t}},tap:{value:function(e,t){return this.then(function(r){return e.call(t,r),r})}},spread:{value:function(e,t){return this.then(function(r){return e.apply(t,r)})}},get:{value:function(e){return this.then(function(t){return t[e]})}},set:{value:function(e,t){return this.then(function(r){return r[e]=t,r})}},apply:{value:function(e,t){return t=t||[],this.then(function(r){return f(t).then(function(t){return r[e].apply(r,t)})})}},call:{value:function(e){var t=Array.slice(arguments,1);return this.then(function(r){return f(t).then(function(t){return r[e].apply(r,t)})})}},bind:{value:function(e){var t=Array.slice(arguments);{if(!Array.isArray(e)){t.shift();var r=this;return Object.defineProperty(this,e,{value:function(){var n=Array.slice(arguments);return r.then(function(r){return f(t.concat(n)).then(function(t){return r[e].apply(r,t)})})}}),this}for(var n=0,a=e.length;a>n;++n)t[0]=e[n],this.bind.apply(this,t)}}},forEach:{value:function(e,t){return w(this,e,t)}},every:{value:function(e,t){return y(this,e,t)}},some:{value:function(e,t){return b(this,e,t)}},filter:{value:function(e,t){return S(this,e,t)}},map:{value:function(e,t){return O(this,e,t)}},reduce:{value:function(e,t){return arguments.length>1?E(this,e,t):E(this,e)}},reduceRight:{value:function(e,t){return arguments.length>1?j(this,e,t):j(this,e)}}}),e.hprose.Future=r,e.hprose.Completer=A,e.hprose.resolved=u,e.hprose.rejected=o,e.hprose.deferred=function(){var e=new r;return _(null,{promise:{value:e},resolve:{value:e.resolve},reject:{value:e.reject}})},N||(e.Promise=function(e){r.call(this),e(this.resolve,this.reject)},e.Promise.prototype=_(r.prototype),e.Promise.prototype.constructor=r,k(e.Promise,{all:{value:f},race:{value:h},resolve:{value:u},reject:{value:o}}))}(function(){return this||(1,eval)("this")}()),function(e){"use strict";e.HproseTags=e.hprose.Tags={TagInteger:"i",TagLong:"l",TagDouble:"d",TagNull:"n",TagEmpty:"e",TagTrue:"t",TagFalse:"f",TagNaN:"N",TagInfinity:"I",TagDate:"D",TagTime:"T",TagUTC:"Z",TagBytes:"b",TagUTF8Char:"u",TagString:"s",TagGuid:"g",TagList:"a",TagMap:"m",TagClass:"c",TagObject:"o",TagRef:"r",TagPos:"+",TagNeg:"-",TagSemicolon:";",TagOpenbrace:"{",TagClosebrace:"}",TagQuote:'"',TagPoint:".",TagFunctions:"F",TagCall:"C",TagResult:"R",TagArgument:"A",TagError:"E",TagEnd:"z"}}(function(){return this||(1,eval)("this")}()),function(e){"use strict";function t(e,t){u.set(e,t),o[t]=e}function r(e){return u.get(e)}function n(e){return o[e]}var a=e.WeakMap,i=e.hprose.createObject,o=i(null),u=new a;e.HproseClassManager=e.hprose.ClassManager=i(null,{register:{value:t},getClassAlias:{value:r},getClass:{value:n}}),e.hprose.register=t,t(Object,"Object")}(function(){return this||(1,eval)("this")}());var HproseRawReader,HproseReader,HproseWriter;!function(e){"use strict";function t(t){var r,n=e,a=t.split(".");for(r=0;r<a.length;r++)if(n=n[a[r]],void 0===n)return null;return n}function r(e,n,a,i){if(a<n.length){var o=n[a];e[o]=i;var u=r(e,n,a+1,".");return a+1<n.length&&null===u&&(u=r(e,n,a+1,"_")),u}var s=e.join("");try{var c=t(s);return"function"==typeof c?c:null}catch(l){return null}}function n(e){var n=c.getClass(e);if(n)return n;if(n=t(e),"function"==typeof n)return c.register(n,e),n;for(var a=[],i=e.indexOf("_");i>=0;)a[a.length]=i,i=e.indexOf("_",i+1);if(a.length>0){var o=e.split("");if(n=r(o,a,0,"."),null===n&&(n=r(o,a,0,"_")),"function"==typeof n)return c.register(n,e),n}return n=function(){this.getClassName=function(){return e}},c.register(n,e),n}function a(e){return 0===e&&1/e===-(1/0)}function i(e){if(void 0===e||void 0===e.constructor)return"";var t=e.constructor,r=c.getClassAlias(t);if(r)return r;var n=t.toString();return r=n.substr(0,n.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/gi,""),""===r||"Object"===r?"function"==typeof e.getClassName?e.getClassName():"Object":("Object"!==r&&c.register(t,r),r)}function o(e,t){if(e&&t)throw new Error('Tag "'+t+'" expected, but "'+e+'" found in stream');if(e)throw new Error('Unexpected serialize tag "'+e+'" in stream');throw new Error("No byte found in stream")}function u(){var e=[];return{set:function(t){e[e.length]=t},read:function(t){return e[t]},reset:function(){e.length=0}}}var s=HproseTags,c=HproseClassManager;HproseRawReader=function(e){function t(c,l){switch(void 0===c&&(c=new HproseStringOutputStream),void 0===l&&(l=e.getc()),c.write(l),l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case s.TagNull:case s.TagEmpty:case s.TagTrue:case s.TagFalse:case s.TagNaN:break;case s.TagInfinity:case s.TagUTF8Char:c.write(e.getc());break;case s.TagInteger:case s.TagLong:case s.TagDouble:case s.TagRef:r(c);break;case s.TagDate:case s.TagTime:n(c);break;case s.TagString:a(c);break;case s.TagGuid:i(c);break;case s.TagList:case s.TagMap:case s.TagObject:u(c);break;case s.TagClass:u(c),t(c);break;case s.TagError:t(c);break;default:o(l)}return c}function r(t){var r;do r=e.getc(),t.write(r);while(r!==s.TagSemicolon)}function n(t){var r;do r=e.getc(),t.write(r);while(r!==s.TagSemicolon&&r!==s.TagUTC)}function a(t){var r=e.readuntil(s.TagQuote);t.write(r),t.write(s.TagQuote);var n=0;r.length>0&&(n=parseInt(r,10)),t.write(e.read(n+1))}function i(t){t.write(e.read(38))}function u(r){var n;do n=e.getc(),r.write(n);while(n!==s.TagOpenbrace);for(;(n=e.getc())!==s.TagClosebrace;)t(r,n);r.write(n)}this.readRaw=t};var l={set:function(){},read:function(){o(s.TagRef)},reset:function(){}};HproseReader=function(e,t,r){function a(t,r){void 0===r&&(r=e.getc()),r!==t&&o(r,t)}function i(t,r){return void 0===r&&(r=e.getc()),t.indexOf(r)>=0?r:void o(r,t)}function c(t){var r=e.readuntil(t);return 0===r.length?0:parseInt(r,10)}function f(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:return g();case s.TagLong:return p();case s.TagDouble:return d();case s.TagNull:return null;case s.TagEmpty:return"";case s.TagTrue:return!0;case s.TagFalse:return!1;case s.TagNaN:return NaN;case s.TagInfinity:return m();case s.TagDate:return y();case s.TagTime:return S();case s.TagUTF8Char:return e.getc();case s.TagString:return j();case s.TagGuid:return C();case s.TagList:return A();case s.TagMap:return r?k():I();case s.TagClass:return D(),x();case s.TagObject:return N();case s.TagRef:return F();case s.TagError:throw new Error(M());default:o(t)}}function g(){return c(s.TagSemicolon)}function h(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:return g();default:o(t)}}function p(){var t=e.readuntil(s.TagSemicolon),r=parseInt(t,10);return r.toString()===t?r:t}function v(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:case s.TagLong:return p();default:o(t)}}function d(){return parseFloat(e.readuntil(s.TagSemicolon))}function T(){var t=e.getc();switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case s.TagInteger:case s.TagLong:case s.TagDouble:return d();case s.TagNaN:return NaN;case s.TagInfinity:return m();default:o(t)}}function m(){return e.getc()===s.TagNeg?-(1/0):1/0}function w(){var t=e.getc();switch(t){case s.TagTrue:return!0;case s.TagFalse:return!1;default:o(t)}}function y(){var t,r=parseInt(e.read(4),10),n=parseInt(e.read(2),10)-1,a=parseInt(e.read(2),10),i=e.getc();if(i===s.TagTime){var o=parseInt(e.read(2),10),u=parseInt(e.read(2),10),c=parseInt(e.read(2),10),l=0;i=e.getc(),i===s.TagPoint&&(l=parseInt(e.read(3),10),i=e.getc(),i>="0"&&"9">=i&&(e.skip(2),i=e.getc(),i>="0"&&"9">=i&&(e.skip(2),i=e.getc()))),t=i===s.TagUTC?new Date(Date.UTC(r,n,a,o,u,c,l)):new Date(r,n,a,o,u,c,l)}else t=i===s.TagUTC?new Date(Date.UTC(r,n,a)):new Date(r,n,a);return W.set(t),t}function b(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagDate:return y();case s.TagRef:return F();default:o(t)}}function S(){var t,r=parseInt(e.read(2),10),n=parseInt(e.read(2),10),a=parseInt(e.read(2),10),i=0,o=e.getc();return o===s.TagPoint&&(i=parseInt(e.read(3),10),o=e.getc(),o>="0"&&"9">=o&&(e.skip(2),o=e.getc(),o>="0"&&"9">=o&&(e.skip(2),o=e.getc()))),t=o===s.TagUTC?new Date(Date.UTC(1970,0,1,r,n,a,i)):new Date(1970,0,1,r,n,a,i),W.set(t),t}function O(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagTime:return S();case s.TagRef:return F();default:o(t)}}function E(){var t=e.read(c(s.TagQuote));return e.skip(1),t}function j(){var e=E();return W.set(e),e}function M(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagEmpty:return"";case s.TagUTF8Char:return e.getc();case s.TagString:return j();case s.TagRef:return F();default:o(t)}}function C(){e.skip(1);var t=e.read(36);return e.skip(1),W.set(t),t}function R(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagGuid:return C();case s.TagRef:return F();default:o(t)}}function A(){var t=[];W.set(t);for(var r=c(s.TagOpenbrace),n=0;r>n;n++)t[n]=f();return e.skip(1),t}function H(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagList:return A();case s.TagRef:return F();default:o(t)}}function I(){var t={};W.set(t);for(var r=c(s.TagOpenbrace),n=0;r>n;n++){var a=f(),i=f();t[a]=i}return e.skip(1),t}function L(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagMap:return I();case s.TagRef:return F();default:o(t)}}function k(){var t=new Map;W.set(t);for(var r=c(s.TagOpenbrace),n=0;r>n;n++){var a=f(),i=f();t.set(a,i)}return e.skip(1),t}function _(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagMap:return k();case s.TagRef:return F();default:o(t)}}function N(){var t=U[c(s.TagOpenbrace)],r=new t.classname;W.set(r);for(var n=0;n<t.count;n++)r[t.fields[n]]=f();return e.skip(1),r}function x(){var t=e.getc();switch(t){case s.TagNull:return null;case s.TagClass:return D(),x();case s.TagObject:return N();case s.TagRef:return F();default:o(t)}}function D(){for(var t=E(),r=c(s.TagOpenbrace),a=[],i=0;r>i;i++)a[i]=M();e.skip(1),t=n(t),U[U.length]={classname:t,count:r,fields:a}}function F(){return W.read(c(s.TagSemicolon))}function P(){U.length=0,W.reset()}HproseRawReader.call(this,e);var U=[],W=t?l:u();this.checkTag=a,this.checkTags=i,this.unserialize=f,this.readInteger=h,this.readLong=v,this.readDouble=T,this.readBoolean=w,this.readDateWithoutTag=y,this.readDate=b,this.readTimeWithoutTag=S,this.readTime=O,this.readStringWithoutTag=j,this.readString=M,this.readGuidWithoutTag=C,this.readGuid=R,this.readListWithoutTag=A,this.readList=H,this.readMapWithoutTag=I,this.readMap=L,this.readHarmonyMapWithoutTag=k,this.readHarmonyMap=_,this.readObjectWithoutTag=N,this.readObject=x,this.reset=P};var f={set:function(){},write:function(){return!1},reset:function(){}},g=function(e){var t=new Map,r=0;return{set:function(e){t.set(e,r++)},write:function(r){var n=t.get(r);return void 0!==n?(e.write(s.TagRef+n+s.TagSemicolon),!0):!1},reset:function(){t=new Map,r=0}}};HproseWriter=function(e,t){function r(e){if(void 0===e||null===e||e.constructor===Function)return void h();if(""===e)return void p();switch(e.constructor){case Boolean:v(e);break;case Number:n(e);break;case String:1===e.length?S(e):E(e);break;case Date:w(e);break;case Map:H(e);break;default:if(Array.isArray(e))M(e);else{var t=i(e);"Object"===t?R(e):L(e)}}}function n(t){t=t.valueOf(),a(t)?e.write(s.TagInteger+"-0"+s.TagSemicolon):t===(0|t)?t>=0&&9>=t?e.write(""+t):e.write(s.TagInteger+t+s.TagSemicolon):u(t)}function o(t){t>=0&&9>=t?e.write(""+t):(-2147483648>t||t>2147483647?e.write(s.TagLong):e.write(s.TagInteger),e.write(""+t+s.TagSemicolon))}function u(t){isNaN(t)?c():isFinite(t)?(a(t)&&(t="-0"),
e.write(s.TagDouble+t+s.TagSemicolon)):l(t>0)}function c(){e.write(s.TagNaN)}function l(t){e.write(s.TagInfinity+(t?s.TagPos:s.TagNeg))}function h(){e.write(s.TagNull)}function p(){e.write(s.TagEmpty)}function v(t){e.write(t.valueOf()?s.TagTrue:s.TagFalse)}function d(t){D.set(t);var r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),a=("00"+t.getUTCDate()).slice(-2),i=("00"+t.getUTCHours()).slice(-2),o=("00"+t.getUTCMinutes()).slice(-2),u=("00"+t.getUTCSeconds()).slice(-2),c=("000"+t.getUTCMilliseconds()).slice(-3);e.write(s.TagDate+r+n+a+s.TagTime+i+o+u),"000"!==c&&e.write(s.TagPoint+c),e.write(s.TagUTC)}function T(e){D.write(e)||d(e)}function m(t){D.set(t);var r=("0000"+t.getFullYear()).slice(-4),n=("00"+(t.getMonth()+1)).slice(-2),a=("00"+t.getDate()).slice(-2),i=("00"+t.getHours()).slice(-2),o=("00"+t.getMinutes()).slice(-2),u=("00"+t.getSeconds()).slice(-2),c=("000"+t.getMilliseconds()).slice(-3);"00"===i&&"00"===o&&"00"===u&&"000"===c?e.write(s.TagDate+r+n+a):"1970"===r&&"01"===n&&"01"===a?(e.write(s.TagTime+i+o+u),"000"!==c&&e.write(s.TagPoint+c)):(e.write(s.TagDate+r+n+a+s.TagTime+i+o+u),"000"!==c&&e.write(s.TagPoint+c)),e.write(s.TagSemicolon)}function w(e){D.write(e)||m(e)}function y(t){D.set(t);var r=("00"+t.getHours()).slice(-2),n=("00"+t.getMinutes()).slice(-2),a=("00"+t.getSeconds()).slice(-2),i=("000"+t.getMilliseconds()).slice(-3);e.write(s.TagTime+r+n+a),"000"!==i&&e.write(s.TagPoint+i),e.write(s.TagSemicolon)}function b(e){D.write(e)||y(e)}function S(t){e.write(s.TagUTF8Char+t)}function O(t){D.set(t),e.write(s.TagString+(t.length>0?t.length:"")+s.TagQuote+t+s.TagQuote)}function E(e){D.write(e)||O(e)}function j(t){D.set(t);var n=t.length;e.write(s.TagList+(n>0?n:"")+s.TagOpenbrace);for(var a=0;n>a;a++)r(t[a]);e.write(s.TagClosebrace)}function M(e){D.write(e)||j(e)}function C(t){D.set(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&"function"!=typeof t[a]&&(n[n.length]=a);var i=n.length;e.write(s.TagMap+(i>0?i:"")+s.TagOpenbrace);for(var o=0;i>o;o++)r(n[o]),r(t[n[o]]);e.write(s.TagClosebrace)}function R(e){D.write(e)||C(e)}function A(t){D.set(t);var n=t.size;e.write(s.TagMap+(n>0?n:"")+s.TagOpenbrace),t.forEach(function(e,t){r(t),r(e)}),e.write(s.TagClosebrace)}function H(e){D.write(e)||A(e)}function I(t){var n,a=i(t),o=N[a];if(void 0!==o)n=x[o];else{n=[];for(var u in t)t.hasOwnProperty(u)&&"function"!=typeof t[u]&&(n[n.length]=u.toString());o=k(a,n)}e.write(s.TagObject+o+s.TagOpenbrace),D.set(t);for(var c=n.length,l=0;c>l;l++)r(t[n[l]]);e.write(s.TagClosebrace)}function L(e){D.write(e)||I(e)}function k(t,r){var n=r.length;e.write(s.TagClass+t.length+s.TagQuote+t+s.TagQuote+(n>0?n:"")+s.TagOpenbrace);for(var a=0;n>a;a++)O(r[a]);e.write(s.TagClosebrace);var i=x.length;return N[t]=i,x[i]=r,i}function _(){N={},x.length=0,D.reset()}var N={},x=[],D=t?f:g(e);this.serialize=r,this.writeInteger=o,this.writeDouble=u,this.writeBoolean=v,this.writeUTCDate=d,this.writeUTCDateWithRef=T,this.writeDate=m,this.writeDateWithRef=w,this.writeTime=y,this.writeTimeWithRef=b,this.writeUTF8Char=S,this.writeString=O,this.writeStringWithRef=E,this.writeList=j,this.writeListWithRef=M,this.writeMap=C,this.writeMapWithRef=R,this.writeHarmonyMap=A,this.writeHarmonyMapWithRef=H,this.writeObject=I,this.writeObjectWithRef=L,this.reset=_}}(window);var HproseFormatter={serialize:function(e,t){"use strict";var r=new HproseStringOutputStream,n=new HproseWriter(r,t);return n.serialize(e),r.toString()},unserialize:function(e,t,r){"use strict";var n=new HproseStringInputStream(e),a=new HproseReader(n,t,r);return a.unserialize()}};!function(e){"use strict";e.HproseResultMode=e.hprose.ResultMode={Normal:0,Serialized:1,Raw:2,RawWithEndTag:3},e.hprose.Normal=e.hprose.ResultMode.Normal,e.hprose.Serialized=e.hprose.ResultMode.Serialized,e.hprose.Raw=e.hprose.ResultMode.Raw,e.hprose.RawWithEndTag=e.hprose.ResultMode.RawWithEndTag}(function(){return this||(1,eval)("this")}());var HproseHttpRequest=function(e){"use strict";function t(e){return null===e.readyState&&(e.readyState=0,e.addEventListener("load",function(){e.readyState=4,"function"==typeof e.onreadystatechange&&e.onreadystatechange()},!1)),e}function r(){if(null!==R)return new ActiveXObject(R);for(var e=["MSXML2.XMLHTTP","MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MsXML2.XMLHTTP.2.6","Microsoft.XMLHTTP","Microsoft.XMLHTTP.1.0","Microsoft.XMLHTTP.1"],t=e.length,r=0;t>r;r++)try{var n=new ActiveXObject(e[r]);return R=e[r],n}catch(a){}throw new Error("Could not find an installed XML parser")}function n(){return v?t(new XMLHttpRequest):r()}function a(){var t="Shockwave Flash",r="application/x-shockwave-flash",n="ShockwaveFlash.ShockwaveFlash",a=navigator.plugins,i=navigator.mimeTypes,o=0,u=!1;if(a&&a[t])o=a[t].description,!o||i&&i[r]&&!i[r].enabledPlugin||(o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o=parseInt(o.replace(/^(.*)\..*$/,"$1"),10));else if(e.ActiveXObject)try{u=!0;var s=new ActiveXObject(n);s&&(o=s.GetVariable("$version"),o&&(o=o.split(" ")[1].split(","),o=parseInt(o[0],10)))}catch(c){}return 9>o?0:u?1:2}function i(){var e=a();if(w=e>0){var t=document.createElement("div");t.style.width=0,t.style.height=0,1===e?t.innerHTML=["<object ",'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ','type="application/x-shockwave-flash" ','width="0" height="0" id="',m,'" name="',m,'">','<param name="movie" value="',p,'hproseHttpRequest.swf" />','<param name="allowScriptAccess" value="always" />','<param name="quality" value="high" />','<param name="wmode" value="opaque" />',"</object>"].join(""):t.innerHTML='<embed id="'+m+'" src="'+p+'hproseHttpRequest.swf" type="application/x-shockwave-flash" width="0" height="0" name="'+m+'" allowScriptAccess="always" />',document.body.appendChild(t)}}function o(){if(!M)for(M=!0,d||T||i();E.length>0;){var e=E.shift();"function"==typeof e&&e()}}function u(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(document.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(u(),o())}function c(){if("complete"===document.readyState)setTimeout(o,1);else if(document.addEventListener){if(document.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1),/WebKit/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(t),s())},10)}else if(document.attachEvent){document.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var r=!1;try{r=null===window.frameElement&&document.documentElement}catch(n){}r&&r.doScroll&&!function a(){if(!M){try{r.doScroll("left")}catch(e){return setTimeout(a,15)}u(),o()}}()}else/MSIE/i.test(navigator.userAgent)&&/Windows CE/i.test(navigator.userAgent)?o():e.onload=o}function l(e,t,r,n,a){if(C)y.post(e,t,r,n,a);else{var i=function(){y.post(e,t,r,n,a)};j.push(i)}}function f(t,r,a,i,o){var u,s=n();s.onreadystatechange=function(){if(4===s.readyState)if(s.onreadystatechange=function(){},void 0!==u&&e.clearTimeout(u),200===s.status)A.__callback(i,s.responseText,!0);else{var t=s.status+":"+s.statusText;A.__callback(i,HproseTags.TagError+HproseFormatter.serialize(t,!0)+HproseTags.TagEnd)}},s.open("POST",t,!0),T&&(s.withCredentials="true");for(var c in r)s.setRequestHeader(c,r[c]);var l=function(){A.__callback(i,HproseTags.TagError+HproseFormatter.serialize("timeout",!0)+HproseTags.TagEnd)};void 0===s.timeout?u=e.setTimeout(function(){s.onreadystatechange=function(){},s.abort(),l()},o):(s.timeout=o,s.ontimeout=l),s.send(a)}function g(e,t,r,n,a){!w||d||"http://"!==e.substr(0,7).toLowerCase()&&"https://"!==e.substr(0,8).toLowerCase()?f(e,t,r,n,a):l(e,t,r,n,a)}var h=document.getElementsByTagName("script"),p=h[h.length-1].getAttribute("flashpath")||"";h=null;var v="undefined"!=typeof XMLHttpRequest,d="file:"===location.protocol,T=!d&&v&&"withCredentials"in new XMLHttpRequest,m="hprosehttprequest_as3",w=!1,y=null,b=[],S=[],O=[],E=[],j=[],M=!1,C=!1,R=null,A={};return A.post=function(e,t,r,n,a,i,o){var u=-1,s={client:o,userdata:{}};n&&(u=b.length,b[u]=n,S[u]=i,O[u]=s);for(var c=0,l=i.length;l>c;c++)r=i[c].outputFilter(r,s);if(M)g(e,t,r,u,a);else{var f=function(){g(e,t,r,u,a)};E.push(f)}},A.__callback=function(e,t,r){if(r)for(var n=S[e],a=O[e],i=n.length-1;i>=0;i--)t=n[i].inputFilter(t,a);"function"==typeof b[e]&&b[e](t),delete b[e],delete S[e],delete O[e]},A.__jsReady=function(){return M},A.__setSwfReady=function(){for(y=-1!==navigator.appName.indexOf("Microsoft")?e[m]:document[m],C=!0,e.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(r){}};j.length>0;){var t=j.shift();"function"==typeof t&&t()}},c(),A}(window),HproseHttpClient=function(){"use strict";function e(e,b){function S(e){r.post(C,A,u.TagEnd,function(t){var r=null;try{var a=new n(t),o=new i(a,!0),s=a.getc();switch(s){case u.TagError:r=new Error(o.readString());break;case u.TagFunctions:var c=o.readList();o.checkTag(u.TagEnd),j(e,c);break;default:r=new Error("Wrong Response:\r\n"+t)}}catch(l){r=l}null!==r&&x.onError("useService",r)},H,k,x)}function O(e,t){return function(){return M(e,t,arguments)}}function E(e,t,r,n,a){if(void 0===t[n]&&(t[n]={},(typeof a===l||a.constructor===Object)&&(a=[a]),Array.isArray(a)))for(var i=0;i<a.length;i++){var o=a[i];if(typeof o===l)t[n][o]=O(e,r+n+"_"+o);else for(var u in o)E(e,t[n],n+"_",u,o[u])}}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(typeof n===l)void 0===e[n]&&(e[n]=O(e,n));else for(var a in n)E(e,e,"",a,n[a])}R=!0,x.onReady()}function M(e,s,l){var b,S,O,E=t.Normal;if(!_&&!N.length||_){var j=I,M=L,R=s.toLowerCase();S=e[s+h]||e[s+p]||e[s+v]||e[R+h]||e[R+p]||e[R+v]||x[s+h]||x[s+p]||x[s+v]||x[R+h]||x[R+p]||x[R+v],O=e[s+d]||e[s+T]||e[s+m]||e[s+w]||e[s+y]||e[R+d]||e[R+T]||e[R+m]||e[R+w]||e[R+y]||x[s+d]||x[s+T]||x[s+m]||x[s+w]||x[s+y]||x[R+d]||x[R+T]||x[R+m]||x[R+w]||x[R+y];var D=l.length,F=typeof l[D-5],P=typeof l[D-4],U=typeof l[D-3],W=typeof l[D-2],z=typeof l[D-1];z===c&&W===f&&U===c&&P===g&&F===g?(M=l[D-1],E=l[D-2],j=l[D-3],S=l[D-4],O=l[D-5],delete l[D-1],delete l[D-2],delete l[D-3],delete l[D-4],delete l[D-5],l.length-=5):z===c&&W===f&&U===g&&P===g?(M=l[D-1],E=l[D-2],S=l[D-3],O=l[D-4],delete l[D-1],delete l[D-2],delete l[D-3],delete l[D-4],l.length-=4):z===f&&W===c&&U===g&&P===g?(E=l[D-1],j=l[D-2],S=l[D-3],O=l[D-4],delete l[D-1],delete l[D-2],delete l[D-3],delete l[D-4],l.length-=4):z===c&&W===c&&U===g&&P===g?(M=l[D-1],j=l[D-2],S=l[D-3],O=l[D-4],delete l[D-1],delete l[D-2],delete l[D-3],delete l[D-4],l.length-=4):z===c&&W===g&&U===g?(j=l[D-1],S=l[D-2],O=l[D-3],delete l[D-1],delete l[D-2],delete l[D-3],l.length-=3):z===f&&W===g&&U===g?(E=l[D-1],S=l[D-2],O=l[D-3],delete l[D-1],delete l[D-2],delete l[D-3],l.length-=3):z===g&&W===g?(S=l[D-1],O=l[D-2],delete l[D-1],delete l[D-2],l.length-=2):z===c&&W===f&&U===c&&P===g?(M=l[D-1],E=l[D-2],j=l[D-3],O=l[D-4],delete l[D-1],delete l[D-2],delete l[D-3],delete l[D-4],l.length-=4):z===c&&W===f&&U===g?(M=l[D-1],E=l[D-2],O=l[D-3],delete l[D-1],delete l[D-2],delete l[D-3],l.length-=3):z===f&&W===c&&U===g?(E=l[D-1],j=l[D-2],O=l[D-3],delete l[D-1],delete l[D-2],delete l[D-3],l.length-=3):z===c&&W===c&&U===g?(M=l[D-1],j=l[D-2],O=l[D-3],delete l[D-1],delete l[D-2],delete l[D-3],l.length-=3):z===c&&W===g?(j=l[D-1],O=l[D-2],delete l[D-1],delete l[D-2],l.length-=2):z===f&&W===g?(E=l[D-1],O=l[D-2],delete l[D-1],delete l[D-2],l.length-=2):z===g&&(O=l[D-1],delete l[D-1],l.length--),b=new a(u.TagCall);var X=new o(b,M);X.writeString(s),(l.length>0||j)&&(X.reset(),X.writeList(l),j&&X.writeBoolean(!0)),_?N.push({args:l,fn:s,call:b.toString(),cb:O,eh:S}):b.write(u.TagEnd)}if(!_){var q=N.length,B=!!q,$="";if(B){for(var Q,G=0;q>G;++G)Q=N[G],$+=Q.call,delete Q.call;$+=u.TagEnd}else $=b.toString();var Y=N.slice(0);N.length=0,r.post(C,A,$,function(e){var r,a,o=null,c=null;if(E===t.RawWithEndTag)o=e;else if(E===t.Raw)o=e.substr(0,e.length-1);else{var f,g=new n(e),h=new i(g,!1,x.useHarmonyMap);r=-1;try{for(;(f=g.getc())!==u.TagEnd;)switch(f){case u.TagResult:E===t.Serialized?o=h.readRaw().toString():(h.reset(),o=h.unserialize()),B&&(Y[++r].rs=o,Y[r].ex=null);break;case u.TagArgument:h.reset(),l=h.readList(),B&&(Y[r].args=l);break;case u.TagError:h.reset(),c=new Error(h.readString()),B&&(Y[++r].ex=c);break;default:c=new Error("Wrong Response:\r\n"+e),B&&(Y[++r].ex=c)}}catch(p){c=p,B&&(Y[0>r?0:r>=q?r-1:r].ex=c)}}for(B||(q=1,Y=[{args:l,fn:s,rs:o,cb:O,eh:S,ex:c}]),r=0;q>r;++r)a=Y[r],c=a.ex,O=a.cb,null!==c?(S=a.eh,s=a.fn,S?S(s,c):x.onError(s,c)):O&&O(a.rs,a.args)},H,k,x)}}var C,R=!1,A={"Content-Type":"text/plain"},H=3e4,I=!1,L=!1,k=[],_=!1,N=[],x=this;x.useService=function(e,t,r){typeof t===c&&void 0===r&&(r=t);var n=x;return r&&(n={}),R=!1,void 0===e?new Error("You should set server url first!"):(C=e,(typeof t===l||t&&t.constructor===Object)&&(t=[t]),Array.isArray(t)?j(n,t):S(n),n)},x.invoke=function(){var e=arguments,t=Array.prototype.shift.apply(e);return M(x,t,e)},x.setHeader=function(e,t){"content-type"!==e.toLowerCase()&&(t?A[e]=t:delete A[e])},x.setTimeout=function(e){H=e},x.getTimeout=function(){return H},x.getReady=function(){return R},x.getByRef=function(){return I},x.setByRef=function(e){void 0===e&&(e=!0),I=e},x.getFilter=function(){return 0===k.length?null:k[0]},x.setFilter=function(e){k.length=0,void 0!==e&&null!==e&&k.push(e)},x.addFilter=function(e){k.push(e)},x.removeFilter=function(e){var t=k.indexOf(e);return-1===t?!1:(k.splice(t,1),!0)},x.getSimpleMode=function(){return L},x.setSimpleMode=function(e){void 0===e&&(e=!0),L=e},x.beginBatch=function(){_=!0},x.endBatch=function(){_=!1,N.length&&M()},x.useHarmonyMap=!1,x.onReady=s,x.onError=s,typeof e===l&&x.useService(e,b)}var t=HproseResultMode,r=HproseHttpRequest,n=HproseStringInputStream,a=HproseStringOutputStream,i=HproseReader,o=HproseWriter,u=HproseTags,s=function(){},c="boolean",l="string",f="number",g="function",h="_OnError",p="_onError",v="_onerror",d="_Callback",T="_callback",m="_OnSuccess",w="_onSuccess",y="_onsuccess";return e.create=function(t,r){return new e(t,r)},e}(),JSONRPCClientFilter=function(e){"use strict";var t=1,r={version:"2.0",inputFilter:function(e,t){var r=JSON.parse(e),n=new HproseStringOutputStream,a=new HproseWriter(n,!0);return r.error?(n.write(HproseTags.TagError),a.writeString(r.error.message)):(n.write(HproseTags.TagResult),a.serialize(r.result)),n.write(HproseTags.TagEnd),n.toString()},outputFilter:function(e,r){var n={};"1.1"===this.version?n.version="1.1":"2.0"===this.version&&(n.jsonrpc="2.0");var a=new HproseStringInputStream(e),i=new HproseReader(a,!1),o=a.getc();return o===HproseTags.TagCall&&(n.method=i.readString(),o=a.getc(),o===HproseTags.TagList&&(n.params=i.readListWithoutTag())),n.id=t++,JSON.stringify(n)}};return r}(window);!function(e){"use strict";"function"==typeof define&&(define.cmd?define("hprose",[],e.hprose):define.amd&&define("hprose",[],function(){return e.hprose})),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=e.hprose)}(function(){return this||(1,eval)("this")}());